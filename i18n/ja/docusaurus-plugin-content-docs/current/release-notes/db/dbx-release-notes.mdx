---
id: dbx-release-notes
title: dbx Release Notes
toc_max_heading_level: 2
---

import Status from '@site/src/components/Highlight';
import UI from '@site/src/components/UItext';

## DBX 1.6.6

### PostgreSQL

-   <Status>Feature</Status> <code>oldest_cur_xid</code>, <code>per_to_wraparound</code>, <code>per_to_emergency_autovac</code>メトリクス追加（2023-2-2）

-   <Status>Feature</Status> <code>replication_lag</code>メトリクス追加（2023-3-13）

### Oracle

-   <Status>Feature</Status> <UI>SQL統計</UI>メニューで<code>sql_id</code>追加（2023-2-3）

-   <Status>Feature</Status>ロックセッション（lock session）収集可否オプションを追加（2023-3-21）

    ```ini title=whatap.conf
    lock=0 # off
    lock=1 # on
    ```

### MySQL

<Status>Fixed</Status> <code>active session</code>収集時に発生するエラーを修正（2023-3-28）

### Redis

-   <Status>Fixed</Status>connectionが終了しないエラーを修正（2023-3-21）

-   <Status>Fixed</Status>メトリクスが出力されないエラーを修正（2023-4-13）

### Tibero

-   <Status>Feature</Status>セッションメトリクス（<code>sesstat</code>）収集時tibero APIを使用する方式を追加して速度と負荷を改善（2023-1-31）

    -   使い方：DBサーバーにdbxインストール及び_libTbmonXX.so _をセットアップ

        ```ini title=whatap.conf
        use_tbstat=1
        ```

    -   収集するセッションメトリクスに該当するカラム項目は次のとおりです。

        -   **_logical_reads_**
        -   **_physical_reads_**
        -   **_block_updates_**
        -   **_parse_count_total_**
        -   **_parse_count_hard_**

    -   次のメニューで確認できます。

        -   **_ダッシュボード_**の**_Active Sessions_**
        -   **_統計/レポート_** > **_SQL統計_**

-   <Status>Feature</Status> SQL統計メニューで`sql_id`追加（10216-2-3）

## DBX 1.6.5

### 共通

-   エージェントアップデート機能の追加：MySQL、PostgreSQL製品の`node_state`メトリクスを追加

-   _whatap.conf_ファイルの`slow_query_log`オプション値に対し、大文字と小文字の区別しないように修正

-   xosエージェントのtcp通信機能を追加

    ```ini title=whatap.conf
    use_tcp=1
    ```

-   `cpu_cores`メトリクスの追加及びrdscpu coreエラーの修正

-   cpu core数エラーを修正

-   sql text literal変数の'$'文字などを処理するよう修正

-   CloudWatch `assume-role`追加

    ```ini title=whatap.conf
    aws_arn=''
    ```

-   autoscale assume-role機能を追加

-   DocumentDB、CloudWatchの情報収集機能を追加

### PostgreSQL

-   `slowoquery`収集機能の追加

-   `replay_lag`、`replication_broken`、`replication_count`メトリクスを追加

-   `session count`収集のためのバージョン処理initを修正

-   `max_connection`メトリクスを追加

-   lockクエリの改善（9.6バージョン以降に対応）

    ```ini title=whatap.conf
    lock_update=true
    ```

-   `uptime`メトリクスを追加

-   **Aurora PostgreSQL**：`instance_name`メトリクスを取得するために追加していた_whatap.conf_ファイルの`rds_instance={instance_name}`オプションを`cloud_watch_instance`に変更

    ```ini title=whatap.conf
    cloud_watch_instance={instance_name}
    ```

### Oracle

**_テーブルスペースサイズ_**メニューにtempファイルサイズの照会機能を追加

### MySQL

-   Aurora MySQL：replication情報を追加

-   `active session`収集時`command`、`user`別のフィルタリング機能を追加

    ```ini title=whatap.conf
    skip_command='{command name}'
    skip_user='{user name}'
    ```

-   `max_connection`メトリクスを追加

-   RDS MySQL driverが使用できるようにオプションを追加

    ```ini title=whatap.conf
    rds_driver=true
    ```

### Tibero

-   **_テーブルスペースサイズ_**メニューにtempファイルサイズの照会機能を追加

-   `session stat`収集時、API使用機能を追加

### CUBRID

-   テーブルサイズの増減機能を追加（xcubエージェント0.9.6バージョン以降が必要）

    ```ini title=whatap.conf
    tables=1
    ```

-   キルセッション（kill session）機能を追加

-   テーブルサイズ増減のバージョン別の内容を修正

-   `pageSize`データベースパラメータの内容を追加、CUBRID `tps`、`qps`、`psize`、`executions`メトリクス追加、CUBRID `broker`がbroker1またはｍquery_editorではない場合、_whatap.conf_ファイルの`broker=`に記入

    ```ini title=whatap.conf
    broker=broker1,broker2,query_editor
    ```

-   `pagesize`データベースパラメータエラーの修正

-   テーブルサイズ増減のログ内容を修正

-   `tps`、`qps`メトリクスが後先になった内容を修正

-   `broker_count`メトリクスを追加

### Redis

`active session`収集のon/off機能を追加(_whatap.conf_ファイルに`active_session=true/false`を追加)

```ini title=whatap.conf
active_session=true/false
```

### MongoDB

cpu個数のエラーを修正
