---
id: log-k8s
title: Kubernetes
description: Kubernetesコンテナとコンテナ内部アプリケーションのログを収集する方法について案内します。
tags:
  - ログモニタリング
  - Kubernetes
---

Kubernetesコンテナとコンテナ内部アプリケーションのログを収集するには、以下を確認してください。 

## エージェントのアップデート

Kubernetesエージェント1.1.35バージョンから可能です。アップデート方法は[次の文書](../kubernetes/agent-update)を参考にしてください。

## エージェント設定の確認

ホーム画面 > プロジェクト選択 > **_ログ_** > **_ログ設定_**

WhaTapモニタリングサービスの初期画面でプロジェクトを選択し、プロジェクトメニュー下位の**_ログ_** > **_ログ設定_**メニューを選択してください。**_ログモニタリングを開始する_**セクションの**_エージェント設定確認_**タブの案内を参考にして進めてください。

### コンテナログ収集の活性化

![KubernetesログNodeエージェント設定](/img/log-k8s-node-agent-setting.png)

1.  **_エージェント設定の確認_**タブ下段の![number 1](/img/number-01.png) ![エージェント設定メニューアイコン](/img/ic-agent.svg) **_エージェント設定_**ボタンを選択してください。 

2.  **_Nodeエージェント設定_**メニューに移動し、![number 2](/img/number-02.png) **_オプション作成_**窓で**_直接入力_**を選択してください。

3.  次のエージェント設定コマンドの**_キー_**`logsink_enabled`と**_値_**\`trueを![number 3](/img/number-03.png)入力ウィンドウに入力してください。

```bash

logsink_enabled=true 

```

1.  ![number 4](/img/number-04.png) **_適用_**ボタンを選択してください。Kubernetesコンテナにログを収集できます。

### コンテナ内部アプリケーションログ収集の活性化

Java 2.1.1、Python 1.2.2バージョンから可能です。Kubernetesコンテナ上で実行されるアプリケーションのログを収集できるように、次を参考にしてください。 

![Kubernetesログアプリケーションエージェント設定](/img/log-k8s-app-agent-setting.png)

1.  **_エージェント設定の確認_**タブ下段の![number 1](/img/number-01.png) ![エージェント設定メニューアイコン](/img/ic-agent.svg) **_エージェント設定_**ボタンを選択してください。 

2.  **_アプリケーションエージェント設定_**メニューに移動し、![number 2](/img/number-02.png) **_オプション作成_**窓で**_直接入力_**を選択してください。

3.  次のエージェント設定コマンドの**_キー_**`logsink_enabled`と**_値_**\`trueを![number 3](/img/number-03.png)入力ウィンドウに入力してください。

```bash

logsink_enabled=true 

```

1.  ![number 4](/img/number-04.png) **_適用_**ボタンを選択してください。Kubernetesコンテナ内アプリケーションのログを収集できます。

:::note

-   Javaアプリケーションログ収集の詳細については、[次の文書](log-java)を参考にしてください。

-   Pythonアプリケーションログ収集の詳細については[次の文書](log-python)を参考にしてください。

-   Golangアプリケーションログ収集の詳細については、[次の文書](log-go)を参考にしてください。

:::

## ログモニタリングの活性化

ホーム画面 > プロジェクト選択 > **_ログ_** > **_ログ設定_**

**_ログモニタリングを開始する_**セクションの**_ログモニタリングの活性化_**タブのトグルボタンで、WhaTapログモニタリングの活性化・非活性化ができます。 

{@include: ../common-items/_log-java-start.mdx} 

{@include: ../common-items/_log-active-note.mdx} 

## Kubernetesログモニタリングカテゴリーの案内

Kubernetesに関する様々なログを確認できます。WhaTap Kubernetesが提供するモニタリングカテゴリは次のとおりです。設定によって重複したログ内容が保存されることがありますので、必ず重複有無を確認してください。

| カテゴリ              | 説明                                                                                                       |
| ----------------- | -------------------------------------------------------------------------------------------------------- |
| `#K8sEvent`       | <ul><li>Kubernetesで発生したイベントがデフォルトで保存および作成されるログ</li><li>ユーザー設定に関係なく基本作成</li></ul>                         |
| `#WhatapEvent`    | <ul><li>WhaTapイベント設定によって発生したイベントが格納されるログ</li><li>ユーザー設定に関係なく、デフォルトで作成されます</li></ul>                      |
| `containerStdout` | <ul><li>コンテナ標準出力ログ</li><li>ユーザー設定時に作成</li><li>ノードエージェントに`logsink_enabled=true`設定を追加したした場合</li></ul>      |
| `AppLog`          | <ul><li>コンテナ内アプリケーションログ</li><li>ユーザー設定時に作成</li><li>アプリケーションエージェントに`logsink_enabled=true`設定の追加時</li></ul> |

<!-- 

Kubernetesコンテナにログを収集できるように上記の設定プロセスを終えたら、次にコンテナ上で実行されるアプリケーションのログを収集できるように設定してください。 

-->
