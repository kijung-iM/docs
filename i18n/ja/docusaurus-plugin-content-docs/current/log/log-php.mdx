---
id: log-php
title: PHP
description: PHPアプリケーションでログを収集する方法について案内します。
tags:
  - ログモニタリング
  - PHP
---

PHPアプリケーションでログを収集するには、次のことを確認してください。

## エージェントのアップデート

PHPエージェント2.3.2バージョンから可能です。アップデート方法は[次の文書](../php/agent-update)を参考にしてください。

## エージェント設定の確認

ホーム画面 > プロジェクト選択 > **_ログ_** > **_ログ設定_**

WhaTapモニタリングサービスの初期画面でプロジェクトを選択し、プロジェクトメニュー下位の**_ログ_** > **_ログ設定_**メニューを選択してください。**_ログモニタリングを開始する_**セクションの**_エージェント設定確認_**タブの案内を参考にして進めてください。

### 設定ファイルパスの確認

ログモニタリングをしようとするファイルの**設定ファイルパス**を確認してください。CLI環境で確認したり、ウェブで確認することができます。

#### CLI環境で確認する

```shell
$ php -i | grep 'Scan'
Scan this dir for additional .ini files => /etc/php8.0.d
```

:::note
該当パスが"(None)"の場合、設定ファイルのパスは_/usr/whatap/php_です。
:::

#### ウェブで確認する

CLI環境とApache環境のPHP設定が異なる場合は、ウェブで`phpinfo()`関数の結果の内容を確認してください。![](https://img.whatap.io/media/images/check_phpinfo.png)

### コマンド入力

設定ファイル パスを含むコマンドを入力すると、ログモニタリングが開始されます。

```shell
export LOGFILES=/some/path/file1,/some/other/file2
echo "whatap.logsink_enabled=true" | sudo tee -a [設定ファイルパス]/whatap.ini
echo "whatap.logsink.files=$LOGFILES" | sudo tee -a [設定ファイルパス]/whatap.ini
```

## ログモニタリングの活性化

ホーム画面 > プロジェクト選択 > **_ログ_** > **_ログ設定_**

**_ログモニタリングを開始する_**セクションの**_ログモニタリングの活性化_**タブのトグルボタンで、WhaTapログモニタリングの活性化・非活性化ができます。 

{@include: ../common-items/_log-java-start.mdx} 

{@include: ../common-items/_log-active-note.mdx} 
