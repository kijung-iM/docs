---
id: log-java
title: Java
description: Javaアプリケーションでログを収集する方法について案内します。
tags:
  - ログモニタリング
  - Java
---

Javaアプリケーションでログを収集するには、次の3段階をすべて完了する必要があります。

## エージェントのアップデート

Javaエージェント2.1.1バージョンから可能です。アップデート方法は[次の文書](../java/update-agent)を参考にしてください。

## エージェント設定の確認

ホーム画面 > プロジェクト選択 > **_ログ_** > **_ログ設定_**

WhaTapモニタリングサービスの初期画面でプロジェクトを選択し、プロジェクトメニュー下位の**_ログ_** > **_ログ設定_**メニューを選択してください。**_ログモニタリングを開始する_**セクションの**_エージェント設定確認_**タブの案内を参考にして進めてください。

1.  プロジェクトメニュー下位の**_管理_** > **_エージェント設定_**メニューを選択してください。

2.  **_オプション作成_**タブから**_直接入力_**を選択してください。入力ウィンドウに次のように`logsink_enabled=true`オプションを追加してください。 

    ![](https://img.whatap.io/media/images/log_java_config1.png)

3.  ログモニタリングを適用するためにアプリケーションを再起動してください。

### 主なオプション

-   **hooklog_enabled** <span class='type'>Boolean</span>

    デフォルト値`false`

    Logライブラリをhookingしてログモニタリングを活性化します。  

    :::caution

    アプリケーション実行前に_whatap.conf_にこのオプションを活性化することで、その後ログモニタリングのOn/Offを`logsink_enabled`設定により動的に制御できます。
    アプリケーション実行前に`logsink_enabled`オプションが`true`に設定された場合、このオプションを別途設定しなくてもログモニタリングが可能です。

    :::

    :::note

    今後ログモニタリングを活用する可能性がある場合は、事前にこのオプションを設定することをお勧めします。

    :::

-   **logsink_enabled** <span class='type'>Boolean</span>

    デフォルト値`false`

    Logモニタリング機能をOn/Offします。

    :::caution

    アプリケーション実行前に_whatap.conf_に`hooklog_enabled`オプションが設定されている場合、このオプションを通じてログモニタリングのOn/Offを動的に制御することができます。

    :::

-   **logsink_zip_enabled** <span class='type'>Boolean</span>

    デフォルト値 `true`

    Logデータ転送データの圧縮有無を設定します。 

-   **logsink_trace_enabled** <span class='type'>Boolean</span>

    デフォルト値`false`

    LogにトランザクションIDを挿入して、トランザクショントレースのログタブの表示有無を指定します。  

## ログモニタリングの活性化

ホーム画面 > プロジェクト選択 > **_ログ_** > **_ログ設定_**

**_ログモニタリングを開始する_**セクションの**_ログモニタリングの活性化_**タブのトグルボタンで、WhaTapログモニタリングの活性化・非活性化ができます。

{@include: ../common-items/_log-java-start.mdx} 

{@include: ../common-items/_log-active-note.mdx} 
