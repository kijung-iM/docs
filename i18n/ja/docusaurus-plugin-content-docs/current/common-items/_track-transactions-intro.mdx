## トランザクションとは

ユーザーブラウザーのリクエストを処理するためのサーバーサイドのLUW（Logical Unit of Work）です。個別ウェブサービス（URL）のリクエストに対する処理過程がトランザクションです。ウェブアプリケーションにおいてトランザクションは、ウェブサービス（URL）に対するHTTP Requestを受け取ってResponseを返す過程です。

アプリケーションの性能は、これらのトランザクションの性能であると言えます。トランザクションの性能には、トランザクションの開始から終了までの時点、レスポンス時間およびリソースの使用量、トランザクション呼び出し元の属性などの情報が含まれます。

基本的には、トランザクションのレスポンス分布とトランザクション統計を使用してトランザクションの性能を分析できます。

## トランザクション名

トランザクションの名前はURLです。 ただ、Getパラメータ（Query String）は除かれます。

**ブラウザーリクエスト**

```bash
http://www.whatap.io/hr/apply.do?name='kim'
```

**トランザクション名**

```bash
/hr/apply.do
```

:::note

WhaTapでは、**ウェブサービス名**と**トランザクション名**を併用しています。サービスの特定URLとそれに対するリクエストを処理するためのモジュールであると言えます。トランザクションリクエストに対する1つの処理を意味するため、両方の名前は同じくURLであると言えます。

:::

## トランザクション名の正規化

MSAベースのシステムが発展することで、URL + ? の因子パラメータ形式よりもURLパスにパラメータを入れる方式をよく使います。

```bash
http://www.whatap.io/hr/kim/apply.do
```

このようにパスパラメータをそのままトランザクション名として使用すると、統計的観点からの性能分析が困難になるため、これを正規化する必要があります。WhaTapは、正規化のためのオプションと機能を提供します。

```bash title='whtap.conf'
trace_normalize_urls=/hr/{name}/apply.do
```

上記のように設定すると、トランザクション名は、_/hr/kim/apply.do_ → _/hello/:name/apply.do_に置き換えられ収集されます。もし対象URLの設定はそのままにして機能だけoffしたい場合は、次のようにオプションを指定することができます。 デフォルト値は`true`です。

```bash title='whatap.conf'
trace_normalize_enabled=false
```
