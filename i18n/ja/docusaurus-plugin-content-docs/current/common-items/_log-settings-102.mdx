<InDoc product='aws-log'>

ホーム画面 > プロジェクト選択 > **_管理_** > **_ログ設定_**

WhaTapモニタリングサービスの初期画面でプロジェクトを選択し、プロジェクトメニューの下位にある**_管理_** > **_ログ設定_**メニューを選択してください。 

</InDoc>

<InDoc product='log'>

ホーム画面 > プロジェクト選択 > **_ログ_** > **_ログ設定_**

WhaTapモニタリングサービスの初期画面でプロジェクトを選択し、プロジェクトメニューの下位にある**_ログ_** > **_ログ設定_**メニューを選択してください。 

</InDoc>

**_ログ設定_**メニューで、ログモニタリング関連の設定を行うことができます。 상단의 탭을 통해 에이전트 설정 확인, 로그 모니터링의 활성화 여부 결정, 로그 데이터의 유지 기간 및 조회 비밀번호 설정, 로그 파서 등록, 빠른 인덱스 설정 등의 메뉴를 사용할 수 있습니다.

:::note

-   **_ログモニタリング活性化_**機能を使用するには、**プロジェクト修正**権限が必要です。 

-   **로그 편집** 권한을 통해 **_로그 모니터링 활성화_** 기능 외 **_로그 설정_** 메뉴를 수정할 수 있습니다.

:::

## 로그 모니터링 시작하기{#log-getting-started}

<InDoc product='aws-log'>

![로그 모니터링 시작하기 sc](/img/log-getting-started-aws.png)

</InDoc>

<InDoc product='log'>

![로그 모니터링 시작하기 sc](/img/log-getting-started.png)

</InDoc>

상단에서 **_로그 모니터링 시작하기_** 탭을 선택하세요. ![와탭 Docs 아이콘](/img/ic-guide.svg) **_가이드 보기_** 아이콘과 **_요금제 보기_** 버튼을 선택하면 관련 안내 화면으로 이동합니다. 

### 에이전트 설정 및 로그 모니터링 활성화{#log-set-up}

<InDoc product='aws-log'>

![number 1](/img/number-01.png) 영역에서 **_로그 모니터링 활성화_** 토글 버튼으로 로그 모니터링 활성화 및 비활성화 여부를 설정하세요.

![로그 모니터링 시작하기](/img/log-start-aws.png)

-   ![アイコン](/img/ic-toggle-on.svg)トグルボタンをオンにすると、ログモニタリンがアクティブになります。 活性化した日から15日間無料で体験できます。
-   ![アイコン](/img/ic-toggle-off.svg)トグルボタンをオフにすると、ログモニタリンが非活性化されます。 これ以上ログを保存しません。 

</InDoc>

<InDoc product='log'>

![number 1](/img/number-01.png) 영역에서 에이전트 설정을 확인하고 **_로그 모니터링 활성화_** 토글 버튼으로 로그 모니터링 활성화 및 비활성화 여부를 설정하세요.

#### 에이전트 설정 확인{#log-check-agent-settings}

ログモニタリングを開始するために、エージェントのバージョンと設定情報を確認してください。 **_에이전트 설정 확인_** 메뉴를 선택하여 안내대로 과정을 진행하세요.

-   **アプリケーションモニタリング**

    **_適用する_**メニューの下位にあるアプリケーション別適用案内を確認してください。 次の説明書[Java](log-java)、[PHP](log-php)、[Python](log-python)、[Go](log-go) などを参考にしてください。

-   **サーバーモニタリング**

    **_適用する_**メニューの下位にある個別適用案内を確認してください。 [次の文書](log-server)を参考にしてください。 案内どおり_whatap.conf_にログモニタリング対象ファイルの設定を追加してください。

-   **Kubernetesモニタリング**

    **_適用する_**メニューの下位にある個別適用案内を確認してください。 [次の文書](log-k8s)を参考にしてください。 

#### 로그 모니터링 활성화{#log-activate}

**_로그 모니터링 활성화_** 메뉴를 선택하여 로그 모니터링 활성화 및 비활성화 여부를 설정하세요.

![](/img/log-start.png)

-   ![アイコン](/img/ic-toggle-on.svg)トグルボタンをオンにすると、ログモニタリンがアクティブになります。 活性化した日から15日間無料で体験できます。 
-   ![アイコン](/img/ic-toggle-off.svg)トグルボタンをオフにすると、ログモニタリンが非活性化されます。 これ以上ログを保存しません。 

</InDoc>

### 로그 모니터링 데이터 설정{#log-data-setting}

![number 2](/img/number-02.png) 영역에서 **_로그 사용량_**을 확인할 수 있습니다. また**_データ保持期間_**および**_ログ照会パスワード_**設定を変更できます。

#### データ保持期間{#data-retention}

共通に適用する基本(default) データ保持期間です。 未指定の場合、デフォルト値は1日です。 カテゴリごとのデータ保持期間を別途設定しない場合は、このデータ保持期間がデフォルトとして適用されます。 카테고리별 데이터 유지 기간을 설정하고 **_초기화_** 버튼을 선택하면 기본 데이터 유지 기간으로 초기화됩니다.

#### 카테고리별 데이터 유지 기간{#data-retention-per-category}

カテゴリごとのログ データ保持期間を指定できます。 **ログ数**は、その期間中に蓄積されたログ行数を意味します。 例えば、**_本日のログ数_**は一日の間に蓄積されたログライン個数、**_予想ログ数_**はデータ保管日に本日のログ数を掛けたログライン個数を意味します。 

ログデータ保持期間を次のように指定できます。 期間指定により、古いデータを削除してスペースを確保できます。

-   **トライアルプロジェクト**  

    データ保持期間として1日、2日、3日を選択できます。

-   **有料プロジェクト**  

    データ保持期間として1日、2日、3日、4日、5日、6日、7日、10日、30日、40日を選択できます。

-   **保存量基準課金**   

    データの保持期間によってコストが異なります。

    > 例えば、1日平均200万ログラインが蓄積され、データ保持期間を3日に指定した場合は、平均600万ログラインが収集サーバーに維持され、課金対象となります。

#### 로그 조회 비밀번호{#log-lookup-pw}

セキュリティを強化するため、**_ログ照会パスワード_**を設定してください。 ログ照会パスワードの指定はオプションです。 ログ照会パスワードを使用中の場合は、ログ画面に入るときは必ずパスワードを入力してください。 

:::note

**パスワードの紛失**

**ログ編集**権限がある場合は、**_ログ設定_**メニューで新しいパスワードに変更できます。

:::

## 로그 1차 파서 설정{#log-setting-parser-1st}

**_로그 설정_** 메뉴 상단에서 **_로그 1차 파서 설정_** 탭을 선택해 로그 파서를 등록 및 수정할 수 있습니다. 로그 1차 파서는 **_GROK_**과 **_JSON_** 파서를 제공합니다. 수집된 로그를 대상으로 패턴의 조건과 일치하는 키 정보 즉 검색 키와 검색 값을 추출합니다. 파싱된 로그 키는 로그의 유형을 분류하기 위한 용도 및 특정 로그를 검색하기 위한 인덱싱 용도로 활용합니다. 유형별 로그 발생 수를 집계하거나 특정 로그를 빠르게 찾아내기 위해 등록하는 필수 파서입니다.

-   **_GROK_**: 기본은 정규 표현식 기반 파싱에 해당합니다. 예약 키워드 기반의 파싱을 제공합니다.

-   **_JSON_**: 로그 중 JSON으로 출력된 부분에 대해서 일괄 파싱을 제공합니다.

:::note 

**パーシングロジック未登録時に検索可能なkey**

`category`, `oid`, `oname`, `okind`, `okineName`, `@txid`, `@login`, `httphost` 

:::

### 설정 항목{#log-parser-comp}

| 設定値      | 説明                                                                                                    | その他      |
| -------- | ----------------------------------------------------------------------------------------------------- | -------- |
| カテゴリ     | パターンを適用するカテゴリです。                                                                                      | required |
| 로그 검출 조건 | 필터로 적용할 검색 키, 검색 값을 입력합니다. 로그 검출 조건에 맞는 로그 데이터에만 패턴을 적용합니다. 로그 검출 조건을 입력하지 않으면 모든 로그를 대상으로 패턴을 적용합니다. | optional |
| パターン     | 対数を構文解析(parsing)するパターンです。 作成したパターンに合わせて構文解析を行い、インデックスを作成します。 GROK, 정규 표현식 문법을 지원합니다.                  | required |

### 파서 목록{#log-parser-list-1st}

![로그 파서 목록](/img/log-1st-parser-list.png)

**_로그 설정_** 메뉴 상단에서 **_로그 1차 파서 설정_** 탭을 선택하면 등록한 파서를 조회하고 추가 및 편집이 가능한 **_파서 목록_** 화면을 확인할 수 있습니다. 

-   상단 오른쪽 **_+ 추가하기_** 버튼을 선택하면 **_파서 추가_** 창이 나타납니다.

-   파서 목록 **_적용 순서_** 컬럼의 ![](/img/ic-drag-drop.svg) 아이콘을 드래그해 파서 설정 순서를 변경할 수 있습니다.

-   파서 목록 ![아이콘](/img/ic-toggle-on.svg) **_활성화_** 토글을 통해 파서 활성화 여부를 지정할 수 있습니다.

-   파서 목록 ![수정 아이콘](/img/ico-edit.svg) **_수정_** 및 ![삭제 아이콘](/img/ico-trash-red.svg) **_삭제_** 아이콘을 통해 등록한 파서를 수정 및 삭제할 수 있습니다.

### 파서 등록 순서{#log-add-parser-1st}

**_로그 설정_** 메뉴 상단에서 **_로그 1차 파서 설정_** 탭을 선택해 로그 파서를 등록 및 수정할 수 있습니다. 다음은 파서 등록 시 공통 순서를 안내합니다.

  ![sc](/img/log-1st-parser-add.png)

1.  **_+ 추가하기_** 버튼을 선택하면 **_파서 추가_** 창이 나타납니다.

2.  **_파서_** 선택 창에서 파서를 선택하세요. 각 파서 및 패턴 등록에 관한 자세한 내용은 다음 문서를 참조하세요.

    -   **_GROK_** [파서 및 패턴 등록](#log-pattern-grok)

    -   **_JSON_** [파서 및 패턴 등록](#log-pattern-json)

3.  **_카테고리_** 선택 창에서 카테고리를 선택하거나 직접 입력하세요. 

4.  **_로그 검출 조건_**으로 활용할 **_검색 키_**와 **_검색 값_**을 선택하거나 직접 입력하세요.

  フィルター条件に合ったログ データに限ってパターンを適用します。 **_로그 검출 조건_**을 지정하지 않으면 모든 로그를 대상으로 패턴을 적용합니다.

1.  **_패턴_**을 입력하세요. 

2.  등록하려는 패턴이 정상적인지 **_시뮬레이션_** 버튼을 선택해 시뮬레이션 및 패턴의 퍼포먼스를 측정하세요.

  시뮬레이션과 퍼포먼스 측정에 관한 자세한 내용은 [다음 문서](#parser-simulation)를 참조하세요.

1.  시뮬레이션 결과가 정상적이라면 **_추가_** 버튼을 선택해 파서를 등록하세요.

:::note

파서 등록 시 동일한 **_카테고리_**에 파서를 중복 등록할 수 없습니다.

:::

### GROK 파서 패턴 등록{#log-pattern-grok}

![GROK 패턴 파서](/img/log-1st-grok.png)

기본 문법은 `%{SYNTAX:SEMANTIC}` 입니다.  

-   **SYNTAX**

    GROK 정의 패턴입니다.

-   **SEMANTIC**

    パーシングされたデータに割り当てるキーです。

    :::note 

    SEMANTICには予約語などが使用されないように複合語の使用を推奨します。

    :::

### JSONフォーマットのパーサーパターン登録{#log-pattern-json}

![JSON 포맷 파서 패턴 등록](/img/log-1st-json.png)  

ログ全体または一部がJSON形式で出力される場合、JSONフォーマットパーサーを通じてJSONに出力された部分をパーシングすることができます。 ログのうちJSON形式として出力された部分を検出するために、**_Prefix_**、**_Postfix_**オプションを組み合わせてログのどの部分をJSONとして認識してパーシングするかを指定します。 

| オプション    | 説明                                                                                                             |
| -------- | -------------------------------------------------------------------------------------------------------------- |
| プレフィックス  | JSON文字列の始点の前にある文字列を指定します。 未指定時、ログ出力文の一番前からJSON文字列として識別します。                                                     |
| ポストフィックス | JSON文字列の終了の後ろにある文字列を指定します。 未指定時、ログ出力文の一番後ろまでJSON文字列として識別します。                                                   |
| 無視する     | JSON出力部のうち、キー抽出を除くフィールドを指定します。                                                                                 |

-   **登録例**

    ```bash title='Log'
    [2022-10-25 10:15:34:145]...(改行)
    Request : {"key1":"value1","key2":"value2",...}(改行)
    Response : {"key3":"value3","key4":"value4",...}
    ```

    例のように流入するログがRequest JSON、Response JSONをすべてパーシングしようとする場合は、次の2つのパターンを登録します。

    -   Requestパーシング用のパターン  

        > "Request："と"Response"間の文字列{"key1":"value1","key2":"value2",...} 対象

    -   Reponseパーシング用のパターン

        > "Response："からログの最後までの文字列{"key3":"value3","key4":"value4",...} 対象
-   **JSONカスタムパターンの登録**

    ログの一部がJSON形式で出力される場合、JSONで出力された部分を専用カスタムパーサーを通じてパーシングできます。 パターンを次のように入力してください。

    ```java
    io.whatap.logsink.parser.JsonFormatParser{}
    ```

    ログのうちJSON形式として出力された部分を検出するために、**_Prefix_**、**_Postfix_**オプションを組み合わせてログのどの部分をJSONとして認識してパーシングするかを指定してください。

    `JsonFormatParser{}`の`{}`にオプションを指定します。

    -   **登録例**

        ```bash title='Log'
        [2022-10-25 10:15:34:145]...(改行)
        Request : {"key1":"value1","key2":"value2",...}(改行)
        Response : {"key3":"value3","key4":"value4",...}
        ```

        例のように流入するログがRequest JSON、Response JSONをすべてパーシングしようとする場合は、次の2つのパターンを登録します。

        -   Requestパーシング用のパターン  
            > "Request："と"Response"間の文字列{"key1":"value1","key2":"value2",...} 対象

        ```java
        io.whatap.logsink.parser.JsonFormatParser {prefix:"Request : ",postfix:"Response"}
        ```

        -   Reponseパーシング用のパターン
            > "Response："からログの最後までの文字列{"key3":"value3","key4":"value4",...} 対象

        ```java
        io.whatap.logsink.parser.JsonFormatParser {prefix: "Response : "}
        ```

### パーサーシミュレーション{#parser-simulation}

1.  파서 추가 화면에서 패턴을 입력한 후 **_시뮬레이션_** 버튼을 선택하세요. **_파서 시뮬레이션_** 창이 나타납니다. 

2.  **_파서 시뮬레이션_** 창에서 **_로그_**를 입력하세요. 

3.  입력한 **_로그_**와 **_패턴_**을 확인하세요. 

  ![파서 시뮬레이션](/img/log-parser-simulation.png)

1.  **_패턴 적용_** 버튼을 누르면 선택한 파서에 입력한 패턴이 적용됩니다. 登録しようとするパターンでパーシングに成功するか確認してください。 

    -   **シミュレーションの成功画面**

        ![시뮬레이션 성공](/img/log-simulation-success.png)

    -   **シミュレーションの失敗画面**

        ![시뮬레이션 실패](/img/log-simulation-fail.png)

### 퍼포먼스 측정{#log-performance}

시뮬레이션 성공 후 **_퍼포먼스 측정_** 버튼을 선택해 파서에 대한 퍼포먼스를 측정할 수 있습니다. 시뮬레이션 수행 대상 문자열에 대하여 파서의 반복 파싱 소요 시간을 측정 후 다음과 같이 측정 결과를 확인하세요.

![퍼포먼스 측정](/img/log-performance.png)

### 파싱 성공{#log-parsed}

파싱 로직을 등록해 **키**(key)가 생성되면 로그 조회 시 해당 키로 파싱된 값이 추가됩니다. 다음 **_라이브 테일_** 메뉴 예시와 같이 파싱된 키와 값이 추가됩니다. 

![파싱 성공](/img/log-parsed.png)

パーシングされたキーは**_ライブテール_**、**_ログ検索_**、**_ログトレンド_**で確認できます。

## 로그 2차 파서 설정{#log-setting-parser-2nd}

**_로그 설정_** 메뉴 상단에서 **_로그 2차 파서 설정_** 탭을 선택해 로그 파서를 등록 및 수정할 수 있습니다. **_4xx, 5xx 상태 코드 파서_**와 **_상태 코드 성공률 파서_**를 제공합니다. 로그 2차 파서는 GROK 또는 JSON과 같은 1차 파서가 파싱된 경우 사용할 수 있는 파서입니다. 1차 파서로 추출한 값을 가공해 통계 데이터를 생성합니다. 웹 혹은 API 응답 로그에 대해 Http Status Code를 기반으로 2차 통계를 추출합니다.

-   **_4xx, 5xx 상태 코드 파서_**: 비정상 응답에 대한 건수 정보를 집계합니다.

-   **_상태 코드 성공률 파서_**: 전체 건수 대비 비정상 응답 비율을 추출합니다.

:::note

로그 2차 파서는 1차 파싱된 결과에 대하여 특수 목적의 2차 파싱 기능을 제공합니다. 2차 파서를 사용하기 위해서는 **1차 파서가 등록되어 있어야 합니다**.

:::

### 파서 목록{#log-parser-list-2nd}

![로그 2차 파서 목록](/img/log-2nd-parser-list.png)

**_로그 설정_** 메뉴 상단에서 **_로그 2차 파서 설정_** 탭을 선택하면 등록한 파서를 조회하고 추가 및 편집이 가능한 **_파서 목록_** 화면을 확인할 수 있습니다. 

-   상단 오른쪽 **_+ 추가하기_** 버튼을 선택하면 **_파서 추가_** 창이 나타납니다.

-   파서 목록 **_적용 순서_** 컬럼의 ![](/img/ic-drag-drop.svg) 아이콘을 드래그해 파서 설정 순서를 변경할 수 있습니다.

-   파서 목록 ![아이콘](/img/ic-toggle-on.svg) **_활성화_** 토글을 통해 파서 활성화 여부를 지정할 수 있습니다.

-   파서 목록 ![수정 아이콘](/img/ico-edit.svg) **_수정_** 및 ![삭제 아이콘](/img/ico-trash-red.svg) **_삭제_** 아이콘을 통해 등록한 파서를 수정 및 삭제할 수 있습니다.

### 파서 등록 순서{#log-add-parser-2nd}

**_로그 설정_** 메뉴 상단에서 **_로그 2차 파서 설정_** 탭을 선택해 로그 파서를 등록 및 수정할 수 있습니다. 다음은 파서 등록 시 공통 순서를 안내합니다.

  ![sc](/img/log-2nd-parser-add.png)

1.  **_+ 추가하기_** 버튼을 선택하면 **_파서 추가_** 창이 나타납니다.

2.  **_파서_** 선택 창에서 파서를 선택하세요. 각 파서 설정 항목 및 제외할 상태 코드 등록에 관한 자세한 내용은 다음 문서를 참조하세요.

    -   **_4xx, 5xx 상태 코드 파서_** [설정 항목 및 제외할 상태 코드 등록](#4xx-5xx-status-parser)

    -   **_상태 코드 성공률 파서_** [설정 항목 및 제외할 상태 코드 등록](#log-pattern-status)

3.  **_카테고리_** 선택 창에서 카테고리를 선택하거나 직접 입력하세요. 

4.  **_로그 검출 조건_**을 선택하거나 직접 입력하세요.

5.  **_제외할 상태 코드_**를 입력하세요. 

6.  **_추가_** 버튼을 선택해 파서를 등록하세요.

### 4xx, 5xx 상태 코드 파서 제외할 상태 코드 등록{#4xx-5xx-status-parser}

![4XX 5XX 상태 코드 파서](/img/log-2nd-4xx5xx.png)

**_4xx, 5xx 상태 코드 파서_**는 status가 이미 파싱된 경우 사용할 수 있는 파서입니다. 構文解析されたstatusを利用して追加で4xx、5xステータスコードを構文解析します。 構文解析したデータで4xx、5xx件数データを作成できます。 제외할 상태 코드로 4xx, 5xx 상태 코드를 입력 또는 선택할 수 있습니다. 입력된 상태 코드는 로그에서 4xx, 5xx 상태 코드를 파싱할 때 제외됩니다. 

#### 설정 항목{#log-parser-comp-4xx5xx}

| 設定値       | 説明                                                                                                                     | その他      |
| --------- | ---------------------------------------------------------------------------------------------------------------------- | -------- |
| カテゴリ      | 4xx, 5xx건수 데이터를 생성할 카테고리입니다.                                                                                           | required |
| 로그 검출 조건  | 필터로 적용할 검색 키, 검색 값을 입력합니다. 로그 검출 조건에 맞는 로그 데이터에 대해서만 4xx, 5xx건수 데이터를 생성합니다. 로그 검출 조건을 입력하지 않으면 모든 로그를 대상으로 데이터를 생성합니다. | optional |
| 제외할 상태 코드 | 통계 데이터 생성 시 제외할 상태 코드입니다. 입력하지 않으면 4xx~5xx에 해당하는 전체 오류 상태 코드를 대상으로 4xx, 5xx건수 데이터를 생성합니다.                              | optional |

#### statusパーサーの登録例

![GROK파서 - status 파싱 패턴 등록](/img/log-2nd-4xx5xx-status.png)

유입되는 로그가 `{"msg":"message","status":404}`이고 예시처럼 GROK 파서로 status를 파싱한다면, `status: 404`와 같이 파싱됩니다. status가 정상적으로 파싱되는 것을 확인헸다면 4XX,5XX 상태 코드 파서에서 제외할 상태 코드를 등록하세요.     

#### 데이터 조회

파서를 모두 등록하면 **_Flex 보드_**로 이동해 **_로그 4XX, 5XX 건수_** 위젯을 생성하세요.

![](https://img.whatap.io/22/11/28/111724log_status_02_widget_template.png) 

ウィジェットを作成すると、次のようにデータを確認できます。

![](https://img.whatap.io/22/11/28/111724log_status_03_widget.png)

-   **_avg_**：照会期間中のデータの平均値です。

-   **max**：照会期間中のデータの最大値です。

-   **_recently_**：照会期間中のデータの最後の値です。

### 상태 코드 성공률 파서 제외할 상태 코드 등록{#log-pattern-status}

![상태 코드 성공률 파서](/img/log-2nd-status.png)

**_상태 코드 성공률 파서_**는 status가 이미 파싱된 경우 사용할 수 있는 파서입니다. status構文解析に関する内容は、[次の文書](#4xx-5xx-status-parser)を参考にしてください。 파싱된 status를 이용해 추가로 2xx, 3xx 상태 코드를 파싱합니다. 構文解析したデータでHTTPリクエスト成功率データを生成できます。 제외할 상태 코드에는 2xx, 3xx 상태 코드를 입력 또는 선택할 수 있습니다. 입력된 상태 코드는 로그에서 2xx, 3xx 상태 코드를 파싱할 때 제외됩니다. 

#### 설정 항목{#log-parser-comp-status}

| 設定値       | 説明                                                                                                                 | その他      |
| --------- | ------------------------------------------------------------------------------------------------------------------ | -------- |
| カテゴリ      | 요청 성공률 데이터를 생성할 카테고리입니다.                                                                                           | required |
| 로그 검출 조건  | 필터로 적용할 검색 키, 검색 값을 입력합니다. 로그 검출 조건에 맞는 로그 데이터에 대해서만 요청 성공률 데이터를 생성합니다. 로그 검출 조건을 입력하지 않으면 모든 로그를 대상으로 데이터를 생성합니다. | optional |
| 제외할 상태 코드 | 요청 성공률 데이터 생성 시 제외할 상태 코드입니다. 입력하지 않으면 2xx~3xx에 해당하는 전체 성공 상태 코드를 대상으로 요청 성공률 데이터를 생성합니다.                          | optional |

#### 데이터 조회

パーサーをすべて登録したら、**_Flexボード_**に移動し、ログリクエスト成功率のウィジェットを作成してください。  

![Flexボード - ログリクエスト成功率のウィジェットテンプレート](https://img.whatap.io/22/11/28/120046log_success_rate_01_widget_template.png)  

ウィジェットを作成すると、次のようにデータを確認できます。

![Flexボード - ログリクエスト成功率のウィジェット](https://img.whatap.io/22/11/28/120046log_success_rate_02_widget.png)

チャート上のデータは、照会期間に関する統計を示します。 統計方法としては最近値、最大値、平均値などを選択できます。 最近値がデフォルト値として選択されています。

## 빠른 인덱스 설정{#log-setting-index}

**_로그 설정_** 메뉴 상단에서 **_빠른 인덱스 설정_** 탭을 선택하세요. 大量のログを収集すると、ログ検索性能が著しく低下する可能性があります。 よく使う検索条件は、**インデックス**(index)で生成すると、ログ検索の性能が向上し、クイック ナビゲーションが可能になります。 設定項目は次のとおりです。

| 設定値                  | 必修の有無      | 説明                                 |
| -------------------- | ---------- | ---------------------------------- |
| カテゴリ                 | 必須         | 高速クインデックスを設定するカテゴリ                 |
| 검색 키                 | 必須         | 빠른 인덱스를 설정할 검색 키                   |
| 大文字と小文字を区別しない        | オプション      | 大文字と小文字を区別するかどうか                   |
| 規則                   | 必須         | `*` を一つ以上必ず含む。                     |
| アクティブ                | 必須         | アクティブ化または非アクティブ化の有無（デフォルト値`true`）  |

## 로그 장기 보관 통계 설정{#log-long-term-archive}

**_로그 설정_** 메뉴 상단에서 **_로그 장기 보관 통계_** 탭을 선택하세요. ログデータは、非常に大容量なので、長期間保存することは困難です。 したがって、ログ統計データの設定機能を使用して**特定の条件を満たすログデータが5分ごとに何件収集されたかに関する情報を保存**することができます。 장기간 시 실제 로그 데이터는 삭제되어도 해당 조건을 만족하는 로그가 얼마나 수집되었는지 추이를 확인할 수 있습니다.

<!-- 

![로그 장기 보관 통계](https://img.whatap.io/22/11/28/090932log_022_long_period_stat_config.png)

1. ***로그 장기 보관 통계*** 탭에서 ***+ 추가하기*** 버튼을 선택하세요. ***로그 장기 보관 통계 추가*** 창이 나타납니다.

1. 규칙을 적용할 ***카테고리***를 선택하세요.

1. ***데이터 보관일***을 선택하세요.

1. 규칙을 만족하는 로그 발생 시 저장할 ***통계 키***를 설정하세요. 동일한 키를 중복 설정할 수 없습니다.

1. ***규칙 이름*** 입력창에 해당 규칙 이름을 입력하세요.

1. ***태그***를 추가하세요.

1. ***제외***를 체크하면 입력한 조건에 해당하지 않는 값을 기반으로 통계 데이터를 생성합니다.

1. ***대소문자 구분***을 체크하면 입력한 규칙의 값에 대해 대소문자 구분 여부를 지정합니다.

1. 생성한 규칙은 ***-*** 아이콘을 통해 삭제하거나 ***+ 추가하기*** 버튼을 통해 추가할 수 있습니다.

-->

### 로그 장기 보관 통계 추가{#log-long-term-archive-add}

![로그 장기 보관 통계](/img/log-long-term-archive.png)

**_로그 장기 보관 통계_** 탭에서 **_+ 추가하기_** 버튼을 선택하면 **_로그 장기 보관 통계 추가_** 창이 나타납니다. **_+ 추가하기_** 버튼을 통해 규칙을 추가하거나  생성한 규칙을 **_-_** 아이콘을 통해 삭제할 수 있습니다.

#### 설정 항목{#log-long-term-archive-comp}

| フィールド           | 説明                                                                                                                     |
| --------------- | ---------------------------------------------------------------------------------------------------------------------- |
| カテゴリ            | 規則を適用するカテゴリです。                                                                                                         |
| 통계 키(key)       | 규칙을 만족하는 로그 발생 시 저장할 키 값으로 동일한 키를 중복으로 설정할 수 없습니다.                                                                     |
| 로그 검출 조건        | ログ統計データを生成する条件です。 この条件を満たすログがどれだけ収集されたかに基づいて統計データを生成します。                                                               |
| 除外              | 除外をチェックすると、入力した条件に該当しない値で統計データを作成します。                                                                                  |
| 大文字と小文字の区分      | 입력한 로그 검출 조건의 값에 대해서 대소문자 구분 여부를 지정합니다.                                                                                |
| アクティブ           | アクティブ化または非アクティブ化の有無（デフォルト値`true`）                                                                                      |

#### 例

次のように設定を追加した場合、収集されたログのうちstatusが`200`, `300`であるログを対象に**_TotalCount_**というキー値で統計データを作成します。 

![](/img/log-long-term-totalcount.png)

### 데이터 조회{#log-widget-statistics}

1.  **_Flexボード_**の**_ウィジェットテンプレート_**で**_ログ長期保存統計_**を検索し、ウィジェットを作成してください。

    ![長期保存統計ウィジェットテンプレート](https://img.whatap.io/22/11/28/090932log_024_long_period_widget_template.png)

2.  データを照会する**_カテゴリー_**と**_キー_**を指定して**_適用_**ボタンを選択します。

    ![長期保存統計ウィジェット - カテゴリおよびキーの選択](https://img.whatap.io/22/11/28/090932log_025_long_period_widget_config.png)

3.  追加した設定値で**_ログ長期保存統計_**データを次のように確認できます。

    ![長期保存統計ウィジェット](https://img.whatap.io/22/11/28/090932log_026_long_period_widget_view.png)
