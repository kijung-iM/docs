ホーム画面 > プロジェクト選択 > **_警告通知_** > **_イベント設定_** >**ログ**タブ選択

収集したログデータを条件に合わせてフィルタリングすることで、警告通知を設定できます。**_+イベントの追加_**ボタンをクリックして、ログイベントの警告通知を設定します。 すべての設定を完了してから、**_保存_**ボタンを選択してください。

![ログ警告通知](/img/set-event-log-main.png)

追加できるログイベントは次のとおりです。

-   **_リアルタイムログイベント_**：リアルタイムで収集したログからキーワードが登場すると、警告通知を送信します。

-   **_複合ログイベント_**：最近収集したログのうち、一定の条件を満たすログが一定数以上収集された場合に警告通知を送信します。

:::note
イベントを追加または設定するには、通知設定の権限が必要です。 権限の詳細については、[次の文書](../project/project-structure)を参考にしてください。
:::

## イベント追加の共通オプション

以下は、**_リアルタイムログイベント_**または**_複合ログイベント_**でイベントを追加する時に設定できる共通オプションです。

-   **_イベントのアクティブ化_**：トグルボタンをクリックして警告通知のアクティブ化の有無を選択することができます。

-   **_レベル_**: <span class='vslow'>危険</span>, <span class='slow'>警告</span>, <span style={{color: '#757575'}}>情報</span>の中で一つのレベルを選択してください。

-   **_イベント名_** ：追加するイベント名を入力してください。

-   **_メッセージ_**：イベント発生時に出力する通知メッセージを入力します。 `${タグまたはフィールドキー}` を入力してメッセージに変数を適用できます。 変数に入力するキーは、選択したメトリック データ**_カテゴリ_**に含まれる値である必要があります。<br/>
    メッセージに`${logContent}`を入力すると、収集されたログの本文が警告通知の内容として出力されます。

    ![ログイベント - メッセージ](/img/set-event-log-message.png)

-   **_カテゴリー_**：ログ区分の名称（ログフォルダ名）をリストから選択または直接入力することができます。

-   **_イベント発生の一時停止_**：過度な警告通知の発生を防止できるオプションです。 最初の警告通知以降、選択した時間帯に警告通知を送信しません。 また、**_イベント記録_**メニューに記録されません。

-   **_イベント受信タグ_**：イベント受信タグを選択する場合は、そのタグを持つプロジェクトメンバーと3rd-partyプラグインに通知を送信することができます。イベント受信タグを選択しない場合は、プロジェクトの全体メンバーに警告通知を送信します。<br/>タグを追加しない場合は、全体メンバーに警告通知を送信します。**_+ タグ追加_**をクリックし、**_タグ一覧_**で警告通知の受信対象を選択してください。**_+ 新しいタグ作成_**を選択してタグを追加することもできます。

    :::note
    **_警告通知_** > **_イベント受信設定_**メニューでプロジェクトメンバーと3rd-partyプラグインにタグを設定できます。
    :::

## リアルタイムログイベントの追加

![リアルタイムログイベント警告の通知設定](/img/set-event-log.png)

-   **_キーワード検索範囲_**：検索キーであり、デフォルト値は**_全体_**を対象とします。**_全体_**とは、ログのコンテンツを意味します。

-   **_キーワード_**：ログから入力したキーワードを含む場合は、警告通知を送信します。 一覧から選択または直接入力できます。

-   **_イベント対象フィルタリング_**：**_キーワード検索範囲_**と**_演算子_**、**_キーワード_**を選択して対象をフィルタリングしたり、**_直接入力_**オプションを選択することができます。 入力値がない場合は、リアルタイムで収集するデータ全体に対する通知の発生有無を判断します。

    ![イベント対象フィルタリング](/img/set-event-log-filter.png)

> 例）`AppLog`カテゴリのログのうち、`level`が`ERROR`であるログを探します。 一致するログの中で**_oid_**が**12345678**の場合、警告通知を送ります。

## 複合ログイベントの追加

![複合ログイベント警告の通知設定](/img/set-event-complex-log.png)

-   **_イベント発行条件_**
    -   **_キーワード検索範囲_**でイベント発生条件の対象を選択することができます。 選択した**_キーワード検索範囲_**に該当するキーワードを選択することができます。
    -   **_キーワード検索範囲_**が同じ項目を追加する場合は「OR」条件で、別の項目を追加する場合は「AND」条件で機能します。 
    -   **_除外_**チェックボックスを選択し、選択したキーワードをイベントの発行条件から除外することができます。
    -   **_+追加_**を選択して複数のイベントの発行条件を追加または除外設定することができます。

-   **_データ照会範囲_**：選択した時間の間に収集したログを照会します。 データ照会時間を5分に選択すると、最近5分間に収集したデータを照会してイベントの発生条件を確認します。

-   **_イベント発行条件_**：イベントが入力した回数と選択した演算子の条件と共に発生した場合、警告通知を送信します。

> 例）`AppLog`カテゴリのログのうち、`条件入力`に該当するログをフィルタリングします。 条件入力で`除外`をチェックした場合、その条件で見つけたログを除外します。 したがって、`level`が`ERROR`であるログは除きます。 最近10分間に収集したログのうち、イベントが`5`より小さい場合は警告通知を送信します。

## ログイベント設定の修正

1.  **_警告通知_** > **_イベント設定_**メニューに移動してください。

2.  **_ログ_**タブを選択してください。

3.  ログイベント一覧の中から修正したいイベント項目で右側の![編集アイコン](/img/ico-edit.svg)ボタンを選択してください。

4.  **_イベント設定_**ウィンドウが表示されたら、オプションを修正してから、**_保存_**ボタンを選択してください。

選択したログイベントを削除するには、イベント設定ウィンドウで右上の**削除**ボタンをクリックしてください。

## ログイベントの非アクティブ化

1.  **_警告通知_** > **_イベント設定_**メニューに移動してください。

2.  **_ログ_**タブを選択してください。

3.  ログイベント一覧の中から警告通知をオフにするイベント項目の一番右側にあるトグルボタンを選択してください。 

もう一度トグルボタンをクリックすると、その警告通知がアクティブになります。

## ログイベントの書き出し／読み込み

**_リアルタイムログイベント_**と**_複合ログイベント_**の設定内容をjsonファイルとして保存した後、読み込んで再利用することができます。

1.  **_警告通知_** > **_イベント設定_**メニューに移動してください。

2.  **_ログ_**タブを選択してください。

3.  ログイベント一覧の上に**_JSON_**！[書き出しアイコン](/img/ico-export.svg)ボタンをクリックしてください。 **_JSON書き出し_**ウィンドウが表示されます。

4.  書き出しするアイテムを修正または編集してください。

5.  右上の![書き出しアイコン](/img/ico-export.svg)**_クリック_**ボタンを選択してください。 ブラウザからjsonファイルをダウンロードします。

6.  ログイベント一覧上の![読み込みアイコン](/img/ico-import.svg)ボタンをクリックしてください。

7.  ファイル選択ウィンドウが表示されたら、先にダウンロードしたjsonファイルを選択してください。

8.  **_JSON読み込み_**ウィンドウが表示されたら、内容を修正してから**_+ 一覧に追加_**ボタンを選択してください。

:::note

-   **_イベントにidが存在します。idを除去した後、もう一度お試しください。_**メッセージが表示されたら**_JSON読み込み_**ウィンドウで`id`項目を削除した上で**_+ 一覧に追加する_**ボタンを選択してください。
-   既存のイベント項目に上書きするには、`id`項目を削除し、**_上書き_**ボタンをクリックしてください。
:::
