データベースメトリクスは、データベースの作業量とリソース使用量を包括的に収集します。WhaTapモニタリングサービスは、継続的にメトリクスを収集してデータベースのボトルネックを特定し、性能問題の根本原因を特定するのに役立つデータを提供します。

<div class='db-metric'>

| Metric                              | Description                                                                                                                                                                                                                                      | Category       |
| ----------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------- |
| `Aborted_connects`                  | サーバー接続エラーの回数                                                                                                                                                                                                                                     | Connection     |
| `active_sessions`                   | クエリを実行中されているセッション数。`Threads_running`と同様                                                                                                                                                                                                          | Connection     |
| `Connection_errors_internal`        | サーバーエラーによって拒否されたコネクション数                                                                                                                                                                                                                          | Connection     |
| `Connection_errors_max_connections` | `max_connections`の制限で拒否されたコネクション数                                                                                                                                                                                                                | Connection     |
| `Connections`                       | DB接続の試行回数                                                                                                                                                                                                                                        | Connection     |
| `Max_used_connections`              | startup以降に使用される最大コネクション数                                                                                                                                                                                                                         | Connection     |
| `Threads_connected`                 | 現在接続されているセッション数                                                                                                                                                                                                                                  | Connection     |
| `max_connections`                   | 最大同時クライアント接続とコネクション数が不十分な場合、**Too ManyConnection Error**が発生する可能性があります。                                                                                                                                                                           | Info           |
| `Bytes_received`                    | DB サーバーが大量の`bytes`と`Bytes_received`を受信した場合、このサーバーは書き込み中心の操作（insert など）であることが分かります。                                                                                                                                                               | MySQL Resource |
| `Bytes_sent`                        | DBサーバから送信されるデータ`bytes`と`Bytes_sent`が多い場合、このサーバーは読み取り作業（select）サーバーであることが分かります。`Questions`、`Uptime`を一緒に適用すると、クエリあたりの平均Byte数、時間あたりの処理Byte数を計算することができます。                                                                                            | MySQL Resource |
| `Created_tmp_disk_tables`           | コマンドの実行中にサーバーからディスク上に作成された一時テーブルの数。ディスク使用量は性能を低下させる可能性があるため、この値が増加した場合、`tmp_table_size`または`max_heap_table_size`値の調整を検討する必要があります。                                                                                                                 | MySQL Resource |
| `Created_tmp_files`                 | mysqldによって作成された一時ファイル数                                                                                                                                                                                                                           | MySQL Resource |
| `Created_tmp_tables`                | コマンドの実行中にサーバーによって作成された内部一時テーブルの数。一般的にクエリでUNION ALLまたは、ORDER BY、GROUP BY、DISTINCTを実行する場合、一時テーブルが使用されます。内部一時テーブルの総数(`Created_tmp_disk_tables` + `Created_tmp_tables`)と比較してディスク上の一時テーブル数(`Created_tmp_disk_tables`)が多くないことをお勧めします。（10%未満）           | MySQL Resource |
| `Innodb_buffer_pool_bytes_dirty`    | バッファプールで変更されたバイト数（ダーティデータ数）                                                                                                                                                                                                                      | MySQL Resource |
| `Innodb_buffer_pool_pages_data`     | 全体バッファプールで現在使用中のバッファプールページ数                                                                                                                                                                                                                      | MySQL Resource |
| `Innodb_buffer_pool_pages_dirty`    | バッファプールのデータで変更されたページ数（ダーティページ数）                                                                                                                                                                                                                  | MySQL Resource |
| `Innodb_buffer_pool_pages_flushed`  | フラッシュされたInnoDBバッファフルページ数および、バッファプールからダーティデータをディスクに書き込む過程で、過度のフラッシュはディスクに負担をかける可能性があるため、ディスクの性能とともにモニタリングする必要があります。                                                                                                                               | MySQL Resource |
| `Innodb_buffer_pool_pages_free`     | 全体バッファプールの未使用（使用可能な）ページ数                                                                                                                                                                                                                         | MySQL Resource |
| `Innodb_buffer_pool_pages_total`    | 全体バッファプールのページ数                                                                                                                                                                                                                                   | MySQL Resource |
| `Innodb_buffer_pool_read_requests`  | 論理的読み取りのリクエスト数（物理的読み取りを含む）。**Inodb buffer pool hit ratio**は次のように計算でき、90%以上をを推奨します。Hit Ratioが低い場合は、`Innodb_buffer_pool_size`を追加することを検討してください。<br/>Buffer Hit Ratio = (1 - (`Innodb_buffer_pool_reads`/`Innodb_buffer_pool_read_requests`)) \* 100 | MySQL Resource |
| `Innodb_buffer_pool_reads`          | 物理的（Disk）読み込みをした回数。Innodbバッファプールにないため、ディスクから直接読み込む必要のある論理的読み込みのリクエスト数。                                                                                                                                                                           | MySQL Resource |
| `Innodb_data_reads`                 | InnoDBの読み込み作業の数（`InnoDB_Data_Read`と混在しない）。                                                                                                                                                                                                       | MySQL Resource |
| `Innodb_data_writes`                | InnoDBの書き込み操作の数。                                                                                                                                                                                                                                 | MySQL Resource |
| `Innodb_dblwr_writes`               | Innodb Doublewriteバッファへの書き込み数。                                                                                                                                                                                                                   | MySQL Resource |
| `Innodb_log_waits`                  | ログバッファが小さいため、フラッシュを待機した回数。Redo logの競合比率は、(`Innodb_log_waits` / `Innodb_log_writes`) で計算され、1未満の値をお勧めします。`Wait`が多い場合、 `innodb_log_buffer_size`を増やすことを検討してください。                                                                                     | MySQL Resource |
| `Innodb_log_writes`                 | innodb redo log fileへの物理書き込み数                                                                                                                                                                                                                    | MySQL Resource |
| `Binlog_bytes_written`              | バイナリログに書き込まれたバイト数。                                                                                                                                                                                                                               | Performance    |
| `Binlog_commits`                    | バイナリログに記録されたCommit数。                                                                                                                                                                                                                             | Performance    |
| `Innodb_row_lock_time`              | row lock取得に掛かった合計時間（milliseconds）                                                                                                                                                                                                                | Performance    |
| `Innodb_row_lock_waits`             | Innodbストレージエンジンテーブルでrow lockを待たなければならない回数。 ロックを取得した数ではなく、ロックを取得するために待機する回数で、この指標が通常より増加するとクエリの待機（ロック競合）が発生することで、クエリのチューニングが必要になります。                                                                                                              | Performance    |
| `lock_wait_sessions`                | 現在、rowlockを取得するために待機している数。`Innodb_row_lock_current_waits`と同様。                                                                                                                                                                                    | Performance    |
| `replication_delay`                 | Replication構造の場合、replication dbに反映される遅延時間。Slave DBで測定される指標です。                                                                                                                                                                                    | Performance    |
| `Slaves_running`                    | 実行されたスレーブSQLスレッド数。                                                                                                                                                                                                                               | Performance    |
| `Slow_queries`                      | DBパラメータ`long_query_time`（秒）に設定された時間を超えて実行されたクエリ数                                                                                                                                                                                                 | Performance    |
| `Sort_rows`                         | sort処理したrow数                                                                                                                                                                                                                                     | Performance    |
| `Com_commit`                        | commit回数                                                                                                                                                                                                                                         | Throughput     |
| `Com_delete`                        | 実行された削除コマンドの数。`handler_delete`以外の行がテーブルから削除された回数をカウントします。                                                                                                                                                                                        | Throughput     |
| `Com_insert`                        | 実行された挿入コマンドの数                                                                                                                                                                                                                                    | Throughput     |
| `Com_rollback`                      | rollback回数                                                                                                                                                                                                                                       | Throughput     |
| `Com_select`                        | Selectコマンドを実行した回数                                                                                                                                                                                                                                | Throughput     |
| `Com_update`                        | 実行されたアップデートコマンドの数                                                                                                                                                                                                                                | Throughput     |
| `Innodb_rows_read`                  | selectで処理されたrow数                                                                                                                                                                                                                                 | Throughput     |
| `Innodb_rows_writes`                | writeに処理されたrow数。`Innodb_rows_inserted` + `Innodb_rows_updated` + `Innodb_rows_deleted`と同様                                                                                                                                                        | Throughput     |
| `Queries`                           | `com_ping`および`com_statistics`を除くサーバーで実行したコマンドの数。Stored program内で実行されるステートメントも計算される点で`Questions`とは異なります。                                                                                                                                          | Throughput     |
| `Questions`                         | 実行されたqueryの数                                                                                                                                                                                                                                     | Throughput     |
| `Select_full_join`                  | 1つ以上のテーブルをJOINする場合、インデックスを使用せずにドリブン（driven）テーブルをフルスキャン（full scan）された回数                                                                                                                                                                           | Throughput     |
| `Select_scan`                       | ドライビング（driving）テーブルをフルスキャン（full scan）した回数。この場合、実行計画のtypeカラムにALLが表示されます。                                                                                                                                                                          | Throughput     |
| `Writes`                            | writeに使用されるコマンド回数。`Com_insert` + `Com_update` + `Com_delete`と同様                                                                                                                                                                                  | Throughput     |

</div>
