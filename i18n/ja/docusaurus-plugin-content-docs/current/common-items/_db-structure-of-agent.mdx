## エージェント構成

以下は、WhaTapエージェントの構成図です。 

<Xclude product='cubrid'>

![エージェント構成図](/img/agent_xos_architecture.png)

</Xclude>

<InDoc product='cubrid'>

![エージェント構成図](/img/agent_xos_xcub_architecture.png)

</InDoc>

-   **収集サーバ**

    エージェントが収集したデータベースのパフォーマンスデータを収集および保存、統計情報を抽出し、これをユーザーに効率的な方法で提供します。収集サーバーはリージョン（Region）別に設定できます。リージョンごとに収集サーバーのアドレスが異なるように割り当てます。ユーザーが選択したリージョンによって収集サーバーのアドレスは異なる場合があります。プロジェクトを作成する際、リージョンも設定します。

-   **DBXエージェント（デフォルトエージェント）**

    Queryベースでパフォーマンスデータを収集し、サーバーに送信します。モニタリング対象データベースサーバーに直接エージェントをインストールすることなく、モニタリングが可能です。

<Xclude product='cubrid'>

-   **XOSエージェント（付加エージェント）**

    付加エージェントは、データベースサーバーのプロセス使用量をモニタリングできる付加オプションエージェントです。データベースサーバーのプロセス使用量をモニタリングしたい場合は、データベースサーバーに別のエージェントを表示してデータを収集できます。プロセスモニタリング設定の詳細については、[次の文書](agent-manage)を参照してください。

    :::note

    XOSエージェントは、x86アーキテクチャベースで動作するOS環境にのみ適用できます。

    :::

</Xclude>
<InDoc product='cubrid'>

-   **XOSエージェント／XCUBエージェント（付加エージェント）**

    付加エージェントは、データベースサーバーのプロセス使用量をモニタリングできる付加オプションエージェントです。データベースサーバーのプロセス使用量をモニタリングしたい場合は、データベースサーバーに別のエージェントを表示してデータを収集できます。プロセスモニタリング設定の詳細については、[次の文書](agent-manage)を参照してください。

    :::note

    XOSエージェントは、x86アーキテクチャベースで動作するOS環境にのみ適用できます。

    :::

</InDoc>

-   **ネットワーク**

    -   基本エージェント：WhaTapのモニタリングエージェントは、収集したモニタリング情報をWhaTap収集サーバーに転送するために外部通信（TCP）6600番ポートを使用します。

    -   付加エージェント：エージェントをインストールしたサーバーとデータベースサーバーの間に外部通信(UDP)3002番ポートを使用します。内部ポートが衝突する場合は、`dbx_port`オプションを使用してポートを変更します。
