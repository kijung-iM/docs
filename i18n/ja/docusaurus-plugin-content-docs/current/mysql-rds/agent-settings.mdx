---
id: agent-settings
title: 設定
description: エージェントの設定方法について案内します。
tags:
  - MySQL RDS
  - データベース
  - データベースモニタリング
---

MySQL RDSでは、従来の[MySQL製品](../mysql/agent-settings)とは異なり、エージェントがWhaTapのリソースにあるため、WhaTapモニタリングサービス画面で直接設定できます。ホーム画面でプロジェクトを選択し、**_管理_** > **_エージェント設定_**メニューを選択してください。エージェントオプションを設定できます。

:::note

**_エージェント設定_**メニューは、**修正**権限を持つメンバーに限ってオプションを設定できます。

:::

## オプションを追加する

![エージェント設定](/img/mysql-rds-agent-settings.png)

1.  **_エージェント一覧_**でエージェント設定を変更するエージェントを選択してください。

2.  **_オプション作成_**で**_オプション選択_**を選択してください。

3.  オプションを選択してください。

    オプションを追加するには、**_追加する_**ボタンをクリックし、オプションを選択してください。

4.  画面右上の**_適用_**ボタンを選択してください。 

エージェントを再起動する際、変更した事項を適用します。

:::note

追加したオプションを削除するには、オプション名の横の![削除アイコン](/img/ico-trash.svg)ボタンを選択してください。

:::

## エージェント設定オプション{#agent-option}

データベースサーバー上の情報を収集するエージェントで設定できるオプションに関する説明です。 

-   **deadlock_interval** <span class='type'>Int</span>

    デフォルト値 `60`

    deadlock情報を読み込む間隔（単位: 分）を設定します。deadlock情報は、設定した間隔の間に発生した最後のdeadlock情報のみを読み込みます。

-   **tables_hour** <span class='type'>Int</span>

    デフォルト値 `20`

    テーブル情報を保存するために収集する時刻（UTC基準）を設定します。デフォルト値としてUTC基準で20時に収集します。韓国時間では午前5時です。

-   **tables_min_row** <span class='type'>Int</span>

    デフォルト値`10000`

    テーブル情報を収集する際に設定した値より小さいrow数のテーブル情報は収集しません。

-   **replication_name** <span class='type'>String</span>

    replication名を設定すると、同じ`replication_name`を持つDBの間にMaster/Slave関係があるものとみなされます。

-   **skip_whatap_session** <span class='type'>Int</span>

    デフォルト値`0`

    `1`を設定すると、WhaTapから収集するためのqueryが動作するセッションをactive session listに表示しません。（デフォルト値：0）

-   **skip_sys_session** <span class='type'>Int</span>

    デフォルト値`1`

    `2`を設定するとsysセッション（root、system user、event_scheduler）がactive sessionで表示されません。`1`を設定する場合、sysセッションは見えますが、total runtimeからは除外します。

### エージェント設定を共有する

エージェントの設定内容をjson形式のファイルとして保存し、ファイルを読み込んで他のエージェントに適用することができます。

1.  **_エージェント一覧_**で設定内容をjsonファイルに書き出しするエージェントを選択してください。

2.  画面右上の![書き出しアイコン](/img/ico-export.svg)ボタンを選択してください。 

3.  jsonファイルをダウンロードしてください。

4.  **_エージェント一覧_**で他のエージェントを選択してください。 

5.  画面右上の![読み込みアイコン](/img/ico-import.svg)ボタンを選択してください。

jsonファイルを通じて読み込んだエージェント設定を確認してください。

## 初期化

オプションを追加したり変更中の内容を初期化したりするには、画面右上の![更新アイコン](/img/ico-refresh.svg)ボタンを選択してください。

## エージェント一覧のフィルタリング

プロジェクトに接続したエージェントが多い場合は、**_エージェント一覧_**で検索またはソート方式を選択することでエージェントを検索することができます。

-   **_エージェント検索_**テキストボックスにエージェント名を入力してください。入力したテキストと一致するエージェントの一覧を自動的に更新します。

-   DB接続に成功したエージェントの一覧を確認するには、**_活性化されたエージェント_**のチェックボックスを選択してください。 

-   エージェント一覧に対し、名前、ポート番号、エージェントバージョンなどの基準でソートするには**_カラム選択_**を選択してください。選択したカラムを基準にエージェント一覧をソートします。ソート順を変更するには、テーブルヘッダーを選択してください。

-   上で設定した基準を初期化するには、**_エージェント一覧_**の横の![更新アイコン](/img/ico-refresh.svg)ボタンを選択してください。
