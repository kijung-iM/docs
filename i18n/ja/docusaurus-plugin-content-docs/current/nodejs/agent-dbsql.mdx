---
id: agent-dbsql
title: DB, SQL
description: Node.jsエージェントのDB、SQL関連オプションを提供します。
tags:
  - Node.js
  - DB
  - SQL
---

Node.jsエージェントのDB、SQL関連オプションを提供します。

-   **profile_connection_open_enabled** <span class='type'>Boolean</span>

    デフォルト値 `true`

    トレース履歴にDBConnectionオープン情報を記録します。

-   **profile_error_sql_time_max** <span class='type'>Int</span>

    デフォルト値`30000`

    SQLの実行時間が設定した値を超えると、TOO SLOWエラーとして処理されます。`0`に設定する場合、エラー処理は行いません。

-   **trace_sql_normalize_enabled** <span class='type'>Boolean</span>

    デフォルト値 `true`

    SQL文からリテラル部分を抽出し、SQL文を正規化する機能を活性化します。

-   **hook_connection_open_patterns** <span class='type'>String</span>

    DB Connection Open時に呼び出すメソッドを登録します。事前設定していないConnection PoolのgetConnectionを登録するのが一般的です。

    ```ini title='Example'
    hook_connection_open_patterns=mypool.ConPool.getConnection
    ```
