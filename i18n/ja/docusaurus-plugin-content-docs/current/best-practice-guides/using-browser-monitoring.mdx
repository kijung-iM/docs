---
id: using-browser-monitoring
title: Browserモニタリングの活用
description: Browserモニタリングサービスを利用して顧客のWebアプリケーションの問題点を迅速に把握し、対応する方法に関する案内文書です。
tags:
  - ブラウザーモニタリング
---

この文書はBrowserモニタリングサービスを利用して顧客のWebアプリケーションの問題点を迅速に把握し、対応する方法に関する案内文書です。 Browserモニタリングに関する案内文書については、[次の文書](../browser)を参照してください。

## ページロード分析

ウェブページのロード速度は、ユーザーエクスペリエンスに大きな影響を及ぼします。 ページのロードが遅いと、ユーザーはページを離れて別のサイトに移動する可能性が高いです。 これにより、ユーザーはページを見る機会を逃してしまい、サービスや製品を利用しなかったり、購入しない場合が発生する可能性があります。

ページのロード速度を最適化し、ユーザーエクスペリエンスを改善することは非常に重要です。 ページロード分析により、どの要素がページロードを遅くするかを識別します。以後、問題点を改善して最適化されたユーザーエクスペリエンスを提供できます。 これらの取り組みは、ユーザーがサービスや製品をより多く利用し、より長い時間利用できるようにします。

ページロード分析は、すべてのウェブサイトとサービスを運営するために不可欠です。 ユーザーエクスペリエンスを改善し、より良いビジネスパフォーマンスを達成できます。

### ブラウザアプリケーションのステータスを把握する

Browserモニタリングサービスの**_ブラウザモニタリングダッシュボード_**メニューを利用して、まずブラウザアプリケーションのページロード速度を確認する必要があります。

:::note

**_ブラウザモニタリングダッシュボード_**メニューの詳細については、[次の文書](../browser/dashboard)を参照してください。

:::

1.  **タイムラインウィジェットを確認**

    ![Page load timeline](/img/browser-pageload-timeline.png)

    **_ページロードタイムライン_**ウィジェットを通じて全体ページロードパフォーマンスをモニタリングしてください。 リアルタイムでブラウザアプリケーションの全体的なパフォーマンスを把握できます。 どの区間でページのロードが遅いかを確認できます。

2.  **ページロード時間とロード数の確認**

    ![Page load widget](/img/browser-pageload-time-num.png)

    多くのユーザーがアクセスするページのロード時間が長くなると、そのページのパフォーマンスを改善することに集中できます。 逆にローディング速度が遅いページの接続量が大きくない場合、該当ページの改善よりは他のページにより多くの開発リソースを投資するのが効率的です。

3.  **ページロードヒートマップを確認**

    ![Page load hitmap](/img/browser-pageload-hitmap.png)

    ページロードイベントをヒートマップチャート形式で提供します。 リアルタイムで発生するページロードイベントを表示します。 ページのロードが遅いほど、チャートの上部に表示されます。

### パフォーマンス低下の原因を特定および解決

ページロードが遅いページを確認した場合は、原因を見つけて解決する必要があります。 **_分析_** > **_ページロードヒートマップ_**メニューに移動してください。 **_ページロードヒートマップ_**は、時間によるページロードの応答時間を分布図チャートで表現します。 ヒートマップを確認すると、個々のページロードイベントに関する詳細情報を取得できます。

#### ページロードヒートマップの確認

![](/img/learn-browser-analyze-pageload-hitmap.png)

1.  **_ページロードヒートマップ_**でブラウザアプリケーションの状態を把握してください。

    特定の時間に負荷がかかった現象を把握したり、特定のページロードイベントが遅い現象を把握することができます。 チャートの上部に分布するイベントほどロード時間が長くかかった場合であり、ブラウザアプリケーションの動作が遅いことを意味します。
2.  ページロードが遅い領域をドラッグすると、**_ページ一覧_**で各ページロードイベントを確認してください。

    **_ページ一覧_**では、基本的に経過時間、ページURL、リージョン情報、ブラウザ、デバイス情報などを確認できます。 特定の環境またはページで発生した問題を把握するために活用できます。
3.  平均ページのロード時間が長かったページをフィルタリングして見ることもできます。

    特定のページに対するページロードイベントを確認するには、**_ページグループ一覧_**でフィルタリングを適用して確認することができます。

#### ページロードの詳細を見る

**_ページ一覧_**で一番左の![詳細表示アイコン](/img/ico-detail-view.svg)を選択すると、**_ページロード詳細_**ウィンドウが表示されます。 ページロードパフォーマンスを分析するためのさまざまな指標とパフォーマンスに影響を与える要素を特定できます。

![Page load details](/img/browser-pageload-details.png)

ページロード中に区間別の所要時間をグラフチャートで提供します。 チャートを通じてページのロード過程で遅い区間を把握し、最適化を進めることができます。

-   **_ページ情報_**：エンドユーザーの接続環境、接続ページ情報、ユーザーID、セッションID情報を提供します。 これらの情報で特定の環境だけで発生する異常現象を判断することもできます。

-   **_ページロードタイミングの情報_**：ページロード時に区間別所要時間を確認することができます。 各区間の詳細については、次の文書を参照してください。

    -   **_リダイレクト_**：ブラウザがウェブページを読み込むとき、リダイレクトの過程でかかった平均時間です。

    -   **_キャッシング_**：ブラウザがウェブページを読み込み、キャッシュされたリソースを検索するのにかかった平均時間です。

    -   **_DNS探索_**：ブラウザがウェブサイトを読み込みながらウェブサイトドメインを照会するのにかかった平均時間です。

    -   **_TCP接続_**：ブラウザがウェブページを読み込む際、TCPヘンドシェイクの過程でかかった平均時間です。

    -   **_応答待ち_**：ブラウザがウェブページを読み込みながらネットワークリクエストを送信した後、サーバーから最初のバイトが受信されるまでかかった平均時間です。

    -   **_ダウンロード_**：ブラウザがウェブページを読み込み、サーバーからリソースをダウンロードするのにかかった平均時間です。

    -   **_レンダリング_**：サーバーからダウンロードしたリソースを画面にレンダリングし、ページロードイベントを完了するのにかかった平均時間です。

    -   **_Load Time_**：ブラウザがウェブページを完全に読み込むのにかかった平均時間です。

    -   **_Front-End_**：ウェブページの初期レンダリングにかかった平均時間です。

    -   **_Back-End_**：ページロードリクエストからリソースをダウンロードするのにかかった平均時間です。

#### バックエンド最適化

-   **キャッシュ設定の最適化**：ウェブページのキャッシュ設定が最適化されなかったり、キャッシュ有効期限が短すぎるとキャッシング速度が遅くなる可能性があります。 コンテンツの種類に応じて適切なキャッシュの期限を設定することが重要です。

-   **キャッシュミス**：キャッシュに保存されていないコンテンツが多い場合、キャッシュが正しく機能しない可能性があります。

-   **DNSサーバ性能の問題**：使用中のDNS サーバーの性能が低下したり過負荷状態の場合、DNS 照会時間が長くなる可能性があります。 これを解決するために、より速く安定したDNSサーバーに変更したり、複数のDNSサーバーを使用して負荷を分散することができます。 また、可能な限り少数のドメインを使用し、外部リソースを最小限に抑えることで、DNS検索時間を短縮することが望ましいです。

-   **リモートDNSサーバの位置**：DNS サーバーがユーザーからあまり離れていると、照会時間が長くなる可能性があります。 地理的に近いDNSサーバーを使用したり、グローバルキャッシュを提供するDNSサービスを使用してこの問題を解決できます。

-   **サーバー応答時間**：サーバーの処理速度が遅い場合や、サーバーが過負荷状態の場合、応答時間が遅くなる可能性があります。 サーバーのパフォーマンスを最適化したり、サーバーの容量を増加させたりする対策が必要になる場合があります。

-   **サーバー位置**：サーバーとユーザー間の距離が遠い場合、遅延時間が長くなる可能性があります。 これを解決するために、Content Delivery Network（CDN）のようなサービスを使用して、ユーザーに近い位置でコンテンツを提供してください。

-   **ネットワーク遅延**：インターネット接続が遅いか不安定な場合、バックエンド区間のローディング速度に影響を及ぼすことがあります。 この問題は、ユーザーのネットワーク状況によって異なる可能性があります。

-   **ファイルサイズ**：大きなファイルをダウンロードするときに速度が遅くなる可能性があります。 イメージ、スクリプト、スタイルシートなどのリソースを最適化および圧縮してファイルサイズを小さくします。

-   **同時ダウンロード制限**：ブラウザは同時にダウンロードできるリソースの数を制限します。 同時にダウンロードされるリソースの数を減らすために、複数のリソースを1つにマージしたり、非同期ロード機能を使用することができます。

#### フロントエンド区間で最適化

-   **複雑なDOM構造**：ウェブページのDocument Object Model（DOM）構造が複雑な場合、ブラウザがページをレンダリングするのに時間が長くかかる可能性があります。 DOM構造を簡素化し、不要なネスト要素を除去してレンダリング速度をを改善してください。

-   **重いCSS**：多数のCSSルールと複雑な選択者を使用する場合、ブラウザがスタイル計算に多くの時間を費やす可能性があります。 CSS最適化やルールの簡素化、不要なスタイルの除去作業を行うことで、レンダリング速度を改善してください。

-   **JavaScript実行遅延**：ウェブページに使用されたJavaScriptコードが多かったり、実行時間が長くかかる場合はレンダリング速度に影響を与える可能性があります。 JavaScriptコードを最適化し、実行時間を短縮し、必要に応じて非同期読み込み方式を使用してレンダリング速度を改善してください。

-   **イメージ最適化**：重いイメージファイルはレンダリング速度を遅くする可能性があります。 イメージを圧縮し、適切なサイズとフォーマットで最適化してください。 必要に応じて、レイジーロード機能を使用してレンダリング速度を改善してください。

-   **Webフォント使用**：Webフォントはユーザーに様々なフォントスタイルを提供することができますが、ローディング時間に影響を与える可能性があります。 Webフォントを最適化し、必要な要素のみを使用してください。 フォントのロード前にテキストを表示する方法でレンダリング速度を改善することもできます。

#### リソース一覧の確認

![リソース一覧](/img/rum-pageload-event-04.png)

ブラウザがサーバーからダウンロードするリソースは、ページロードのパフォーマンスに大きな影響を与える可能性があります。 **_ページロード詳細_**ウィンドウの**_リソース一覧_**ではローディング速度が遅いか、ファイルサイズが大きいリソースを迅速に把握することができます。

各リソースの開始時間に基づいてタイムラインチャートを提供し、ロード速度が遅いリソースを把握できます。 各リソースのファイルサイズを参照し、パフォーマンスに影響を与える部分を改善してください。 各リソースを選択すると表示される**_リソース詳細_**ウィンドウで詳細時間情報を確認できます。

## AJAXモニタリング・分析

Asynchronous JavaScript and XML（AJAX）は非同期方式でデータを交換し、ウェブページをアップデートする機能です。 AJAXはユーザーエクスペリエンスを改善し、サーバーへのリクエストを減らすなどのメリットを持っています。 しかし、AJAXはブラウザで実行されるJavaScriptコードによって実装されるため、モニタリングが必要です。 AJAXモニタリングが必要な理由は次のとおりです。

-   AJAXリクエストが正常に処理されることを確認するため

-   AJAXリクエストによるパフォーマンス低下を把握するため

-   AJAXリクエストがセキュリティ上の問題を引き起こす可能性があるかどうかを確認するため

-   AJAXリクエストがネットワーク帯域幅を無駄にしていることを確認するため

### ブラウザアプリケーションのAJAXリクエストステータス把握

**_ブラウザモニタリングダッシュボード_**メニューのAJAX関連ウィジェットでブラウザアプリケーションのAJAXリクエスト状態を簡単に確認することができます。

1.  **AJAX応答時間の確認**

    ![AJAX response time](/img/browser-ajax-response-time.png)

    ブラウザアプリケーションで発生するAJAXの平均ロード時間を確認できます。 ロードが長くかかるホストまたはpathを特定するのに役立ちます。

2.  **AJAX失敗件数の確認**

    ![AJAX fail count](/img/browser-ajax-fail-count.png)

    ブラウザアプリケーションでAJAXリクエストが正常に行われない数です。 ブラウザアプリケーション全般で発生しているAJAX失敗件数をリアルタイムで確認できます。

3.  **AJAXヒートマップの確認**

    ![AJAX hitmap](/img/rum-ajax-hitmap.png)

    AJAXリクエストをヒートマップチャート形式で提供します。 リアルタイムで発生するAJAXリクエストを表示します。 AJAXが遅いほどチャート上部に位置し、問題のあるAJAXに対しては黄色系で表示されます。

### AJAXヒートマップを通じたパフォーマンス低下の原因の把握および解決

AJAXのリクエストが遅れたり問題があれば、各AJAXがどのような状態なのか確認する必要があります。

#### 特定AJAXのリクエストエラー

![AJAX request error](/img/learn-browser-ajax-request-error.png)

AJAXのリクエスト時、応答値が400以上またはリクエスト自体ができなかった場合、黄色系でヒートマップチャートに表示されます。 この色が現れると、次のような状況が発生したものと推測できます。

-   サーバーに問題が発生してリクエストを処理できなかった場合

-   JavaScriptコード上のリクエストが適切でない場合

-   認証問題によりリクエストが失敗した場合

-   サーバーが応答を提供していない場合

#### ボトルネック現象

![AJAX slow status](/img/learn-browser-ajax-slow-error.png)

ブラウザアプリケーション全体でAJAXリクエストにボトルネックが発生した場合、次のような状況を確認してください。

-   **サーバーパフォーマンスの制限**：サーバー側で処理できるリクエストの数が制限されたり、サーバー資源が不足している場合、ボトルネック現象が発生する可能性があります。

-   **同時リクエスト数の制限**：ウェブブラウザは同時に処理できるリクエスト数に制限があります。 過度のリクエストが同時に発生すると、ボトルネックになる可能性があります。

-   **大量のデータ転送**：送信または受信するデータのサイズが非常に大きい場合、リクエスト処理に時間がかかり、ボトルネック現象が発生する可能性があります。

-   **JavaScriptの実行パフォーマンス**：AJAXリクエストを処理するJavaScriptコードのパフォーマンスが悪かったり、他のスクリプトとの衝突が発生した場合、ボトルネックになる可能性があります。

-   **応答処理の遅延**：サーバーから受信した応答を処理するのに時間が長くかかる場合、ボトルネックが発生することがあります。

-   **ネットワーク帯域幅制限**：インターネット接続の帯域幅が制限されている場合、同時に処理できるリクエスト数が制限され、ボトルネック現象が発生する可能性があります。

#### タイムアウト

![AJAX time out](/img/learn-browser-ajax-timeout.png)

ブラウザアプリケーション全般でAJAXリクエストにタイムアウトエラーが発生した場合、次のような状況であることを確認してください。

-   **サーバー応答の遅延**：サーバー側で処理するのに時間が長くかかったり、サーバーがダウンした場合、タイムアウトが発生することがあります。

-   **ネットワーク遅延**：インターネット接続が不安定または遅延が発生した場合、AJAXリクエストが適時に完了しないことがあります。

-   **リクエスト処理の遅延**：ブラウザでリクエストを処理するのに時間が長くかかる場合、タイムアウトが発生することがあります。

-   **大量のデータ**：送信または受信しなければならないデータのサイズが非常に大きい場合、リクエスト処理に時間が長くかかり、タイムアウトが発生する可能性があります。

-   **JavaScript実行エラー**：AJAXリクエストを処理するJavaScriptコードに問題があったり、他のスクリプトと衝突が発生した場合はタイムアウトが発生する可能性があります。

-   **ブラウザ互換性の問題**：AJAXリクエストの処理に問題がある特定のブラウザでのみエラーが発生する可能性があります。

-   **リクエストタイムアウト設定**：AJAXリクエストのタイムアウト値を低すぎると、リクエストが完了する前にタイムアウトが発生することがあります。

### AJAX詳細情報の確認

AJAXによるパフォーマンス低下現象を発見した場合は、どのページでどのAJAXが問題を起こしているかを確認する必要があります。 **AJAXヒートマップ**：ウィジェットでチャートの特定領域をドラッグすると、選択した領域のAJAXに関する詳細情報を確認できます。

![AJAX details](/img/rum-ajax-details.png)

問題が発生したAJAXの経過時間、AJAX URL、ページURL、ブラウザ、ステータスコード、エラーメッセージなどを確認できます。 AJAX URLを通じて、どのAJAX呼び出しが問題を起こしたのか、ブラウザ情報を通じてどのような環境のユーザーが問題を抱えているのかを把握できます。 ステータスコードとエラーメッセージは、問題の原因を特定できる重要な情報です。 迅速な原因把握は、問題解決とサービス改善への近道です。

## ユーザー接続環境分析

ブラウザアプリケーションを利用するユーザーの環境はさまざまです。 ブラウザアプリケーションをすべてのブラウザおよび接続エリアに対応して開発することは不可能に近いです。 予期せぬ問題をモニタリングして予防し、最小限に抑える技術的な方法を適用する必要があります。

ブラウザアプリケーションをユーザーに安定的に提供できるように、以下の問題を解決する必要があります。

-   **ウェブブラウザ及び機器互換性の問題解決：**ユーザーが様々なブラウザ及び機器を使用するため、それぞれのブラウザや機器によって互換性の問題が発生することがあります。 ユーザーが使用するブラウザおよび機器情報を把握すれば、そのブラウザや機器で発生する問題をより簡単に解決できます。

-   **リージョン別ブラウザアプリケーションのパフォーマンス差問題解決：**ユーザーが接続するリージョンによってネットワーク速度が異なるため、ブラウザアプリケーションのパフォーマンスが遅れる場合があります。 これを把握すれば、そのリージョンで発生する問題をより簡単に解決できます。

### ユーザーの接続環境を把握

-   **ブラウザ別ページのロード時間とロード数を確認**

    ![Pageload by browsers](/img/learn-browser-page-load.png)

    ブラウザアプリケーションのブラウザごとのページロード時間とページロード数を提供します。 これにより、ブラウザごとのページロードパフォーマンスを簡単に比較できます。

-   **ブラウザ別エラー数を確認**

    ![Error count by browsers](/img/learn-browser-error-count.png)

    ブラウザごとに発生したエラー件数を円グラフで表示します。 ブラウザがどのようなエラーに頻繁に遭遇するか、簡単に把握することができます。 また、特定のブラウザで発生するエラーが他のブラウザよりも多い場合、開発者はそのブラウザに対する最適化作業を進めることができます。

-   **リージョン別ページのロード時間とロード数を確認**

    ![Pageload map](/img/browser-pageload-map.png)

    ブラウザアプリケーションのリージョン別ページロード時間とページロード数をマップチャートで表現します。 ユーザーは、リージョンごとにブラウザアプリケーションのパフォーマンスを簡単に比較できます。 ページのロード時間が遅いリージョンでウェブサイトのパフォーマンスを向上させる方法を見つけることもできます。 たとえば、ロード時間が遅いエリアでサーバーを追加したり、キャッシュをより効率的に利用したりする方法を見つけることができます。 これにより、ユーザーはより高速で安定したブラウザアプリケーションを利用できます。

### パフォーマンス低下の原因を特定

-   ブラウザごとに同じリソースファイルを読み込みするのにロード時間が異なります。 **_ページロードの詳細_**で特定ブラウザで遅くなる原因を把握し、次の状況を確認してください。

    -   **CSS処理**：ブラウザごとに異なるCSS処理方式でレンダリング速度に差が生じることがあります。 ブラウザごとにサポートするCSSプロパティや機能にも違いがあるため、これを考慮してウェブページページを実装する必要があります。

    -   **最適化レベル**：ブラウザごとにページローディングを最適化する技術と程度に差がある可能性があります。 画像のロード、コードの実行、リソースリクエスト手順などの最適化タスクは、ブラウザごとに異なる場合があります。

    -   **ウェブページの複雑さ**：ウェブページの複雑さとコンポーネントがブラウザごとに異なるパフォーマンスを示すことができます。 複雑なJavaScriptコードやCSSアニメーションは、一部のブラウザでパフォーマンス低下を引き起こす可能性があります。

-   特定ブラウザでのみエラーが発生した場合は、**ウェブAPIおよび対応機能**を確認してください。

    ブラウザごとにWeb APIおよび対応機能の違いにより、一部のブラウザーでは特定の機能が遅く動作したり、まったく動作しない場合があります。 この場合、ポリフィル(polyfill)を使用してその機能を置き換えるか、特定のブラウザーへの最適化を考慮する必要があります。

## エラー分析

以下の理由から、ブラウザーエラーをモニタリングする必要があります。

-   **ユーザーエクスペリエンスの改善**：ブラウザーエラーが発生すると、ユーザーがアプリケーションを正しく使用できない可能性があります。 したがって、ブラウザーエラーをモニタリングし、できるだけ早く修正する必要があります。

-   **セキュリティ脆弱性の防止**：ブラウザーエラーは、ウェブサイトのセキュリティに大きな脅威を与える可能性があります。 エラーをモニタリングし、セキュリティの脆弱性を迅速に修正する必要があります。

-   **性能改善**：ブラウザーエラーは、アプリケーションの性能を低下させる可能性があります。 性能の低下は、サービス品質とユーザー満足度に関連しています。 性能の低下が続くと、アプリケーションユーザーは減少し続けます。

### ブラウザーエラーを確認する

**_ダッシュボード_** > **_ブラウザエラー_**メニューでは、ブラウザーアプリケーションで発生するエラーをモニタリングします。 次のようなエラータイプを把握できます。

:::note

**_ブラウザーエラー_**メニューの詳細については、[次の文書](../browser/browser-error-dashboard)を参考にしてください。

:::

-   **ページ別エラー件数を確認する**

    ![Error count by pages](/img/browser-error-by-page.png)

    ページごとに発生するエラー件数をリアルタイムで確認できます。 問題が発生するページを迅速に把握し、対処できます。

-   **エラータイプ別のエラー件数及びAJAXエラー件数を確認する**

    ![Error count by types](/img/browser-error-by-types.png)

    ブラウザーアプリケーション全般で発生するエラー件数について、エラータイプごとに確認できます。

-   **ブラウザー別のエラー件数を確認する**

    ![Error count by browsers](/img/learn-browser-error-count.png)

    ブラウザごとに発生したエラー件数を円グラフで表示します。 ブラウザがどのようなエラーに頻繁に遭遇するか、簡単に把握することができます。 また、特定のブラウザで発生するエラーが他のブラウザよりも多い場合、開発者はそのブラウザに対する最適化作業を進めることができます。

-   **エラーメッセージ テーブルを確認する**

    ![Error message table](/img/browser-error-table.png)

    エラーメッセージに基づいたエラー数とブラウザーごとに発生したエラー数をテーブル一覧として表示します。 どのブラウザーでどのエラーが最も多く発生するかを把握し、問題を解決するために利用できます。 エラー発生の主な原因が何かを把握するのにも役立ちます。 新しいエラーが発生した場合は、このテーブルを参考にして迅速に対処できます。

### エラーの原因を把握する

エラーメッセージ、エラー発生ページを見つけたら、**_分析_** > **_エラー追跡_**メニューでエラーに関する詳細を確認してください。

![Tracking error](/img/learn-browser-tracking-error.png)

**_エラー追跡_**メニューでは、ブラウザーで発生したエラー情報を詳細に確認することができます。 エラー発生ページやエラーメッセージに対してフィルターを適用して検索することもできます。 ユーザーが発生させたエラーは、ユーザー環境情報(ブラウザー、OS、デバイス)、エラースタック情報、ページ情報を含んでいます。

エラーの原因を特定するには、次の手順に進むことをお勧めします。

1.  エラーメッセージを確認して、そのページでどのようなタスクを実行したかを確認してください。

2.  そのページで使用されたコードとライブラリを確認します。

3.  エラースタック情報を使用して、どの関数やライブラリでエラーが発生したかを確認してください。

4.  ブラウザー、OS、デバイス情報を使用して、特定の環境に限って発生するエラーかを確認してください。

5.  ページ情報を使用して、ウェブページの特定の部分に限って発生するエラーかを確認してください。

エラーの原因を把握した後は、できるだけ早く修正してください。 ユーザーエクスペリエンスを改善し、ブラウザーアプリケーションのセキュリティ脆弱性を防止できます。
