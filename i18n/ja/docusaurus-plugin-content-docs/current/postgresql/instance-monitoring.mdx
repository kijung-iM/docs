---
id: instance-monitoring
title: インスタンスモニタリング
description: インスタンスモニタリングメニューでは、データベースサーバーの主要なメトリックに関する詳細情報をリアルタイムに確認できます。
tags:
  - PostgreSQL
  - インスタンス
  - ダッシュボード
  - データベースモニタリング
---

:::note

この文書は、PostgreSQLモニタリングV2を基準に作成されました。PostgreSQLモニタリングV1文書については、[次の文書](../postgresql-v1/instance-monitoring)を参照してください。

:::

{@include: ../common-items/_db-instance-monitoring-desc.mdx}

## 基本画面ガイド

<ProdImg img='db-instance-monitoring.png' desc='インスタンスモニタリング' />

### ![](/img/number-01.png)検索時間と検索先を選択します。

基本的に、直近10分間の収集されたデータをリアルタイムで表示します。**_時間_**と**_インスタンス_**項目で時間と対象を選択すると、収集データが![数字2](/img/number-02.png)グラフチャートと![数字4](/img/number-04.png)の**_アクティブセッション_**テーブルに自動的に反映されます。

-   過去のデータを表示するには、緑色のボタンをクリックし、閲覧時間を選択してください。過去3週間までのデータを表示できます。 

-   日付と時間を検索するには、時計の表示を選択してください。日付と時間のテキスト領域をクリックすると、日付と時間を選択するオプションが表示されます。再度、リアルタイムでデータを検索します![リアルタイムアイコン](/img/ico-play-time.svg)ボタンを選択します。

-   他のインスタンスのデータを表示するには、**_ インスタンス_** をクリックし、データベースサーバーの名前を選択してください。

### ![](/img/number-02.png)グラフチャートウィジェット領域

![数字3](/img/number-03.png)**_Default_**プリセットで保存された16個の指標をグラフチャート形式のウィジェットで表示します。横軸は時間、縦軸は各指標の数値です。各指標の意味を確認したい場合は、名前の横にある<span class='mark'>i</span>ボタンを選択するか、[次の文書](metrics-data-list)を参照してください。

-   別のウィジェットの位置を変更するには、ウィジェットの上部を選択した状態でドラッグしてください。ただし、ウィジェットのサイズを変更することはできません。

-   ウィジェットのチャートで特定の時間を選択すると\*リアルタイム照会**モードを停止し、選択した時間に実行したセッション情報を![数字4](/img/number-04.png) \***アクティブセッション**_テーブルが表示します。その後 _**アクティブセッション\*\*\*テーブル上には、5秒単位でデータが参照できるボタンが表示されます。

    ![](/img/db-instance-monitoring-seltime-postgresql.png)

    :::note

    -   選択した時間は、**_アクティブセッション_**テーブルの右上で確認できます。

    -   **_アクティブセッション_**テーブル一覧の文字の色は黒 → <span class='slow'>オレンジ</span> → <span class='vslow'>赤</span>の順にセッションの実行速度が遅いことを意味します。

    :::

### ![](/img/number-04.png)アクティブセッション、ロックツリー、プロセス情報

リアルタイムで稼働中のアクティブセッションとロックツリー、プロセス情報を表示することができます。ウィジェットのチャートで特定時間を選択すると、**リアルタイム参照**モードが停止し、選択した時間に実行したセッション情報がテーブルに表示します。テーブルの上に5秒単位でデータを表示できる時間を選択できます。

{@include: ../common-items/_db-dashboard-activesession-desc.mdx}

{@include: ../common-items/_db-dashboard-locktree-desc.mdx}

{@include: ../common-items/_db-dashborad-process-info-desc.mdx}

:::note

テーブル一覧の文字の色は黒 → <span class='slow'>オレンジ</span> → <span class='vslow'>赤</span>順にセッションの実行速度が遅いことを意味します。

:::

## 指標を選択する

ウィジェットに指標グラフを追加・置換するには、![設定アイコン](/img/ico-setting.svg)ボタンを選択してください。**_Metric Select_**ウィンドウが表示されます。設定を完了して**_保存_**ボタンを選択します。

<ProdImg img='db-metrics-select.png' desc='지표 선택'/>

-   ![数字5](/img/number-05.png) **_プレビュー_**：選択した指標のグラフのプレビューを確認できます。

-   ![数字6](/img/number-06.png) **_タイトル_**：ウィジェット名を入力してください。

-   ![数字8](/img/number-08.png) **_推奨メトリクス_** / **_全体メトリクス_**：**_推奨メトリクス_**を選択すると、データベースモニタリングでよく見られる指標のリストを表示します。一覧に表示されている指標をウィジェットの指標に変更または追加できます。

-   ![数字9](/img/ic-number-09.svg)領域で指標の推移をグラフで確認し、ウィジェットの追加または変更することができます。目的のタブを選択し、カテゴリに従って指標の一覧を要約できます。

### 指標の追加

ウィジェットに2つ以上の指標を追加できます。最大5つまで追加できます。

1.  指標を追加するウィジェットの右上の![設定アイコン](/img/ico-setting.svg)ボタンを選択してください。

2.  **_Meric Select_**ウィンドウが表示されると、![数字8](/img/number-08.png)メトリクス一覧または[数字9](/img/ic-number-09.svg)グラフ一覧で追加する指標の右側の![追加アイコン](/img/ico-add.svg)ボタンを選択してください。

3.  指標をさらに追加する場合は、**2**のプロセスを繰り返してください。

4.  ウィジェットを簡単に識別できるように![数字6](/img/number-06.png) **_タイトル_**を変更してください。

5.  画面右下の**_保存_**ボタンを選択してください。

指標を追加したウィジェットに追加した指標の数に対してチャートが作成されます。ウィジェット名の横にある<span class='mark'>i</span>ボタンを選択すると、追加した指標の名前と内容を確認できます。また、チャートにマウスオーバーすると、ツールチップで数値を確認できます。

### 指標の変更

ウィジェットの指標を別の指標に変更できます。

1.  指標を変更するウィジェットの右上の![設定アイコン](/img/ico-setting.svg)ボタンを選択してください。

2.  **_Meric Select_**ウィンドウが表示すると、![数字7](/img/number-07.png)領域で変更する指標を選択します。

3.  ![数字8](/img/number-08.png)メトリクス一覧または![数字9](/img/ic-number-09.svg)グラフ一覧で目的の指標を選択してください。

4.  ![数字7](/img/number-07.png)領域で選択した指標の名前が変更されたことを確認してください。

5.  画面右下の**_保存_**ボタンを選択してください。

### 指標の削除

ウィジェットに複数の指標を設定した状態で不要な指標を削除できます。

1.  指標を削除するウィジェット右上の![設定アイコン](/img/ico-setting.svg)ボタンを選択してください。

2.  **_Meric Select_**ウィンドウが表示されると、![숫자 7](/img/number-07.png)領域から削除する指標の右側の![削除アイコン](/img/ico-trash.svg)ボタンを選択してください。

3.  画面右下の**_保存_**ボタンを選択してください。

:::note

ウィジェットには、少なくとも 1つの指標が選択されている必要があります。ウィジェットのすべての指標を削除することはできません。

:::

## プリセット

ユーザーが設定したウィジェットの設定をプリセットとして保存し、読み込むことができます。次のプリセットを基本的に提供し**_Default_**プリセットは変更できません。

![Preset](/img/db-preset-list.png)

-   **_Default_**：主要DB指標とXOS指標(CPUおよびメモリ使用率、メモリSWAP使用率、Disk I/Oなど)で構成されています。

-   **_Default(rds)_**：主要DB指標とRDS CloudWatch指標(CPU使用率、メモリ可用性、ストレージ可用性、Networkなど)で構成されています。

### プリセット保存

1.  ウィジェットの指標を追加または変更します。

2.  画面右上の**_プリセット保存_**ボタンを選択してください。 

3.  名前を変更し、**_保存_**ボタンを選択します。

**_プリセット_**一覧から保存した項目を選択して、設定を呼び出すことができます。

:::note

-   **_Default_**プリセットは、変更できません。 

-   ユーザー定義プリセットは、最大5つまで作成できます。 変更した指標グラフだけでなく、アクティブセッションのカラム順序、カラム幅、フィルター適用内容も一緒に適用されます。

:::

### プリセット削除

画面右上の**_プリセット_**を選択すると、プリセット一覧が表示されます。削除するプリセット項目右側の![削除アイコン](/img/ico-remove.svg)ボタンを選択してください。

<!--## 액티브 세션 영역 활용-->

{@include: ../common-items/_db-using-area-active-session.mdx} 

### テーブルカラムの変更{#change-column}

{@include: ../common-items/_db-data-edit-column.mdx} 

### テーブルデータのフィルタリング

{@include: ../common-items/_db-table-data-filtering.mdx}

### 進行中のセッションの停止

1.  テーブルの右上の![セッションキルアイコン](/img/ico-kill-session.svg)ボタンを選択してください。

2.  テーブル一覧から停止するセッションを選択してください。複数選択できます。

3.  **_停止_**ボタンを選択してください。

4.  **_セッション強制終了_**ウィンドウが表示されたら、パスワード(**_Parameter Key_**) 値を入力してください。

    ![セッション強制終了](/img/db-kill-session-confirm.png)

5.  **_適用_**ボタンを選択します。

選択したセッションが停止します。

:::note

DBXエージェントのインストールパスの_paramkey.txt_ファイルからパスワードを確認できます。

:::

<!--컬럼 정보 안내-->

{@include: ../common-items/_db_postgresql-column.mdx}
