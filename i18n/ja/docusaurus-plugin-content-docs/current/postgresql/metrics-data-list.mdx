---
id: metrics-data-list
title: PostgreSQLメトリクス
description: PostgreSQLデータベースのメトリクスについて案内します。
tags:
  - PostgreSQL
  - メトリックス
  - データベース
  - データベースモニタリング
---

:::note

이 문서는 PostgreSQL 모니터링 V2를 기준으로 작성되었습니다. PostgreSQL 모니터링 V1 문서는 [다음 문서](../postgresql-v1/metrics-data-list)를 참조하세요.

:::

データベースメトリクスは、データベースの作業量とリソース使用量を包括的に収集します。 WhaTapモニタリングサービスは、継続的にメトリクスを収集してデータベースのボトルネックを確認し、性能問題の根本原因を識別するのに役立つデータを提供します。

その他メトリクスに関する詳細については、[次のリンク](https://www.postgresql.org/docs)を参考にしてください。

<div class='db-metric'>

| Metric                   | Description                                                                                                  |
| ------------------------ | ------------------------------------------------------------------------------------------------------------ |
| `active_sessions`        | クエリが実行されているセッション数                                                                                            |
| `blk_read_time`          | 当該データベースのバックエンドからデータファイルブロックを読み込むのにかかる時間（milliseconds）、 `track_io_timing`が活性化した場合、そうでなければ`0`                 |
| `blk_write_tiem`         | 当該データベースのバックエンドからデータファイルブロックを作成するのにかかる時間（milliseconds）、 `track_io_timing`が活性化した場合、そうでなければ`0`                 |
| `blks_hit`               | ディスクブロックがバッファキャッシュで既に発見され、読み込みが必要ない回数（オペレーティングシステムのファイルシステムキャッシュではなく、PostgreSQLバッファキャッシュのヒットのみ含む）            |
| `blks_hit_ratio`         | バッファキャッシュヒット率<br/>sum(blks_hit)\*100/sum(`blks_hit` + `blks_read`)                                           |
| `blks_read`              | 該当データベースで読み込んだディスクブロックの数                                                                                     |
| `buffers_checkpoint`     | チェックポイント(`check_point`) 間に記録されたバッファ数                                                                         |
| `check_point`            | `check_point`は、すべてのデータファイルが順次的なトランザクションログのうち、特定の時点を基準にすべてのデータファイルが物理的に書き込まれた特定時点を意味します。 `check_point`が発生した回数 |
| `checkpoints_write_time` | ファイルがディスクに記録されるチェックポイント処理部分でかかる総時間（milliseconds）                                                             |
| `checkpoints_tiemed`     | 予約されて実行されたチェックポイント数                                                                                          |
| `commit_count`           | コミットされたトランザクションの数                                                                                            |
| `conflicts`              | 該当データベースで復旧中、衝突によりキャンセルされたクエリ数                                                                               |
| `connect_error`          | サーバー接続エラーの回数                                                                                                 |
| `deadlock_count`         | 該当データベースで検知された膠着状態（deadlock）数                                                                                |
| `dml_count`              | DML（Data Manipulation Language）文法（statement）が実行された回数                                                         |
| `fatal_count`            | 致命的なエラーで終了したデータベースセッション数                                                                                     |
| `index_hit_ratio`        | キャッシュ内のインデックス比率<br/>(sum(`idx_blks_hit`) - sum(`idx_blks_read`)) / sum(`idx_blks_hit`) \* 100                |
| `lock_wait_sessions`     | 現在rowlockを獲得するために待機中の数                                                                                       |
| `long_running_sessions`  | 現在データベースで無期限に実行されているクエリの数                                                                                    |
| `max_connections`        | 最大同時クライアント接続とコネクション数が不十分な場合、**Too ManyConnection Error**が発生する可能性があります。                                       |
| `numbackends`            | 当該データベースに接続されたバックエンド数または共有オブジェクトの場合、`nULL`                                                                   |
| `rollback_count`         | そのデータベースからロールバックされたトランザクションの数                                                                                |
| `table_hit_ratio`        | テーブルのblks hit(キャッシュヒット)와 blks read(ディスク読み込み回数)の比率                                                            |
| `temp_bytes`             | 該当データベースのクエリによって臨時ファイルに記録された総データ量                                                                            |
| `temp_files`             | 該当データベースのクエリによって生成された臨時ファイル数                                                                                 |
| `total_runtime`          | クエリを実行しているセッションの実行時間の合計                                                                                      |
| `total_sessions`         | すべてのセッション数                                                                                                   |
| `tup_deleted`            | 該当データベースからクエリによって削除された行数                                                                                     |
| `tup_fetched`            | 該当データベースからクエリが取得した行数                                                                                         |
| `tup_inserted`           | 該当データベースからクエリによって挿入された行数                                                                                     |
| `tup_returned`           | 該当データベースからクエリから返された行数                                                                                        |
| `tup_updated`            | 該当データベースからクエリによってアップデートされた行数                                                                                 |
| `uptime`                 | サーバーが起動してから過ぎ去った時間                                                                                           |
| `vacuum_running_count`   | 実行中のvacuum機能の数                                                                                               |
| `wait_sessions`          | 待機中のセッション数                                                                                                   |
| `warning_count`          | 合計エラーおよび警告、参考数                                                                                               |
| `cpu(xos)`               | XOSエージェントで収集するOSメトリクス                                                                                        |
| `cpu_idle(xos)`          | XOSエージェントで収集するOSメトリクス                                                                                        |
| `cpu_iowait(xos)`        | XOSエージェントで収集するOSメトリクス                                                                                        |
| `cpu_sys(xos)`           | XOSエージェントで収集するOSメトリクス                                                                                        |
| `cpu_user(xos)`          | XOSエージェントで収集するOSメトリクス                                                                                        |
| `mem(xos)`               | XOSエージェントで収集するOSメトリクス                                                                                        |
| `mem_available(xos)`     | XOSエージェントで収集するOSメトリクス                                                                                        |
| `mem_buffcache(xos)`     | XOSエージェントで収集するOSメトリクス                                                                                        |
| `mem_free(xos)`          | XOSエージェントで収集するOSメトリクス                                                                                        |
| `mem_swapfree(xos)`      | XOSエージェントで収集するOSメトリクス                                                                                        |
| `mem_swaptotal(xos)`     | XOSエージェントで収集するOSメトリクス                                                                                        |
| `mem_total(xos)`         | XOSエージェントで収集するOSメトリクス                                                                                        |
| `mem_used(xos)`          | XOSエージェントで収集するOSメトリクス                                                                                        |
| `net_recv_bytes(xos)`    | XOSエージェントで収集するOSメトリクス                                                                                        |
| `net_recv_packets(xos)`  | XOSエージェントで収集するOSメトリクス                                                                                        |
| `net_send_bytes(xos)`    | XOSエージェントで収集するOSメトリクス                                                                                        |
| `net_send_packets(xos)`  | XOSエージェントで収集するOSメトリクス                                                                                        |

</div>
