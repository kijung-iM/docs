---
id: apply-agent
title: ブラウザーエージェントの適用
description: WebアプリケーションにWhaTapブラウザーエージェントを適用し、ブラウザーのモニタリングを開始してください。
tags:
  - ブラウザーモニタリング
  - エージェント
---

import TR from '@site/src/components/TR';

WhaTapブラウザーモニタリングサービスを使用するには、[会員登録](https://www.whatap.io/ko/signup/)後、プロジェクトを作成し、WebアプリケーションにWhaTapブラウザーエージェントを適用する必要があります。

{@include: ../getting-started/_create-project-v2.mdx}    

{@include: ../getting-started/_accesskey.mdx}

## WhaTapブラウザーエージェントのインストール

エージェントのインストール画面の案内に従って、Webアプリケーションに適用するWhaTapブラウザーエージェントコードを適用してください。

![WhaTapブラウザーエージェントのインストール](/img/rum-apply-agent.png)

### ![](/img/number-01.png)データ収集サンプリング

WhaTapブラウザーエージェントは、ユーザーセッションを基準にデータを収集します。 収集する全体セッションの割合を0から100まで設定できます。

### ![](/img/number-02.png)WhaTapブラウザーエージェントスクリプト

WhaTapブラウザーエージェントは、インラインスクリプトの形式で提供します。 インストールガイドで提供するスクリプトコードを、モニタリング対象のすべてのHTML ページの`<head>`タグ内部の最上段に追加してください。

次の2つの方法のうち、希望する方法を選択してエージェントを適用してください。

-   **_Async_**（非同期ロード）：WebアプリケーションにWhaTapブラウザーエージェントを非同期形式でロードします。 
    -   ウェブアプリケーションのロード性能には影響を与えません。 
    -   ブラウザーエージェントがロードされる前に発生したAJAX、エラーなどのデータに抜けが発生する可能性があります。
-   **_Sync_**（同期ロード）: WebアプリケーションにWhaTapブラウザーエージェントを同期形式でロードします。
    -   ウェブアプリケーションのロード時にすべてのデータを収集する場合、お勧めします。 
    -   ウェブアプリケーションのロードに影響を与える可能性があります。

## WhaTapブラウザーエージェントのオプション設定

WhaTapブラウザーエージェントに適用するオプションを設定します。 オプションは、インストールスクリプトのConfigオブジェクトで設定できます。 プロジェクトアクセスキー、ユーザーセッション全体の割合、収集除外リソースドメインなどを設定できます。

```json title='config example' showLineNumbers
config: {
  projectAccessKey: {プロジェクトアクセスキー},
  pcode: {pcode},
  sampleRate: 100,
  ignoreOrigins: [ 'https://ignore-site.com/' , '/^(https?://)([^/]*)(ignore-site.io)(/)(.*)/i' ],
}
```

-   **projectAccessKey**：プロジェクトアクセスキーです。
-   **pcode**：プロジェクトコードです。
-   **sampleRate**：収集するユーザーセッションの割合を設定できます。
-   **ignoreOrigins**：統計収集から除外する特定のリソースドメインを文字列の配列の形で追加できます。 正規表現式を適用することもできます。

:::note

`projectAccessKey`、`pcode`値は、インストールガイドで提供されるスクリプトコードをそのままコピーして使用することをお勧めします。

:::

## ブラウザーモニタリングを開始する

すべての設定を完了しました。 [WhaTapモニタリングサービス](https://service.whatap.io)ページに移動し、ブラウザーモニタリングを開始してください。 先に作成したプロジェクトを選択し**_ダッシュボード_** > **_ブラウザーモニタリングダッシュボード_**メニューに移動してください。 モニタリング状況を把握することができます。
