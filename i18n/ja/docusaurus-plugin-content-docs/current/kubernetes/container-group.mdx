---
id: container-group
title: 対象グループ化
description: グループ化機能により、Kubernetes環境に対する様々なユーザーのニーズを満たすことができます。
tags:
  - クバネティス
  - クバネティスモニタリング
---

## ユーザーの関心事に応じた多様なグループ化

基本的な**_コンテナマップ_**メニューの画面を見てみると、すべてのコンテナやPodが展開されています。ただ、Kubernetesのコンテナ/Podを観察する際には、特定の基準で対象を選別してモニタリングする場合が多いです。もちろん対象を見る基準は非常に多様です。Kubernetes環境に対するユーザーの関心事がすべて同じではないからです。

サーバー担当者は、Kubernetesリソースを実行するためのノードの状態に関心が高いです。一方で、特定サービスのアプリケーション担当者はDeploymentや個別Pod、あるいはコンテナの状態に関心が高いです。もし新規バージョンのデプロイ後なら、全体的なDeploymentの状態だけでなく、新規イメージを使用するコンテナをモニタリングすることになります。

それで、このような多様なユーザーのニーズを満たすために提供する機能が**グループ化**です。

-   **コンテナ基準ビュー** **Nodeグループ化**

    ![コンテナ基準ビュー + Nodeグループ化](https://img.whatap.io/media/images/whatap_kubernetes_container_map_group_node.png)

-   **Pod基準ビュー** + **Deploymentグループ化**

    ![Pod 基準ビュー + Deploymentグループ化](https://img.whatap.io/media/images/whatap_kubernetes_container_map_group_deployment.png)

### 主なグループ化の属性

コンテナマップのビューによって対応するグループ化の属性は次のとおりです。

| 基準ビュー | グループ化属性                                                                                                                        |
| ----- | ------------------------------------------------------------------------------------------------------------------------------ |
| コンテナ  | 未設定（All）<br/>Node<br/>Namespace<br/>Deployment<br/>ReplicaSet<br/>Pod<br/>ContainerName<br/>Image<br/>DemonSet<br/>StatefulSet |
| Pod   | 未設定（All）<br/>Node<br/>Namespace<br/>Deployment<br/>ReplicaSet                                                                  |

{@include: ../common-items/_container-note-reset.mdx} 

## グループ化 & カード

コンテナマップは、1つ以上のカードで構成されています。もしグループ化を適用していない状態なら、プロジェクト内の全体コンテナ/Podが1つの大きなカード内に表現されます。グループ化を適用すると、各グループ単位でカードを構成します。

![グループ単位でカード一覧](/img/kubernetes-group-card.png)

上の画面は、Deploymentを基準属性としてグループ化を適用したものです。各Deployment単位でカードが一覧されていることがわかります。

グループ化を適用すると、基準属性でグループ化できない対象は基本的には表示されません。 しかし、その対象も画面に表示できる方法があります。画面上段の![指示線1](/img/number-01.png)![設定アイコン](/img/ico-setting.svg)ボタンを選択してください。**_不明なグループを非表示_**のチェックボックスを解除すると、グループ化に該当しない対象だけを集めて別途のカードとして表現します。

<!-- ![카드 설정 속성](https://img.whatap.io/media/images/whatap_kubernetes_container_map_card_metric_on.png)-->

## カード別メトリクスデータ

各カードの下には、グループ化された対象に関するメトリクスデータを表示します。以下は、提供する指標の情報です。

| 基準ビュー | リソース指標                                                                        | アプリケーション指標                                                  |
| ----- | ----------------------------------------------------------------------------- | ----------------------------------------------------------- |
| コンテナ  | CpuByLimit<br/>CpuByRequest<br/>MemByLimit<br/>NetRxBytes<br/>NetTxBytes<br/> | Normal TX<br/>Slow TX<br/>Very Slow TX<br/>Total TX<br/>TPS |
| Pod   | CpuTotUsage<br/>CpuByNode<br/>MemUsage<br/>NetRxBytes<br/>NetTxBytes          | ^                                                           |

ユーザーのカーソルが***Container***(または***Pod***)、***ActiveTX***の上に載せていると、各メトリクスに関する説明をポップアップとして確認することができます。

![メトリクス説明](https://img.whatap.io/media/images/whatap_kubernetes_container_map_cards_metri_description.png)

-   ポップアップに表示された指標のうち（Avg）が付いた項目は、カードの下に表示された同じ名前の指標数値がグループ内の個別対象が持つ値の平均値であることを意味します。

-   ポップアップに表示された指標のうち（Sum）が付いた項目は、カードの下に表示された同じ名前の指標数値がグループ内の個別対象が持つ値の合算値であることを意味します。

### カードのメトリクスデータ非表示

カードの下にメトリクスデータを非表示にし、チャートにのみ集中できます。画面上段の![指示線1](/img/number-01.png)![設定アイコン](/img/ico-setting.svg)ボタンを選択してください。**_カード下段にメトリクスを表示_**チェックボックスを解除してください。この機能は、カード数が多いときに役立ちます。

次のように、メトリクス データを非表示にすることができます。

![カード下段のメトリクスデータの表示を解除](https://img.whatap.io/media/images/whatap_kubernetes_container_map_cards_metric_off.png)
