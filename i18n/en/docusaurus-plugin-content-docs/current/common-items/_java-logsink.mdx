:::caution

The LogSink option is available in whatap.agent-2.1.0 or later.

:::

### Enabling the log monitoring function

-   **logsink_enabled** <span class='type'>Boolean</span>

    Default `false`

    It enables the log monitoring function.

-   **logsink_stdout_enabled** <span class='type'>Boolean</span>

    Default `logsink_enabled`

    Set whether or not to collect System.out logs generated by Java applications.

-   **logsink_stderr_enabled** <span class='type'>Boolean</span>

    Default `logsink_enabled`

    Set whether or not to collect System.err logs generated by Java applications.

-   **logsink_logback_enabled** <span class='type'>Boolean</span>

    Default `logsink_enabled`

    Set whether or not to collect the logback framework logs.

-   **logsink_log4j_enabled** <span class='type'>Boolean</span>

    Default `logsink_enabled`

    Set whether or not to collect the log4j framework logs.

-   **logsink_tomcat_enabled** <span class='type'>Boolean</span>

    Default `logsink_enabled`

    Set whether or not to collect Tomcat logs.

-   **logsink_custom_enabled** <span class='type'>Boolean</span>

    Default `logsink_enabled`

    Set whether or not to collect user-defined logs.

### Collecting framework logs

To monitor logs collected from the framework, add the setting and plugin to intercept logs from the module. Set the default category name for logs collected in the framework to `AppLog`. The default value is the same as in the `hooklog_enabled` option.

If the `hooklog_enabled` value has been changed, restarting is required. The default value of `hooklog_enabled` is `logsink_enabled`. Accordingly, if `logsink_enabled=true` is set and the Java application is restarted, `hooklog_enabled` is set to `true` and `hooklog_logback_enabled` is also set to `true`.

-   **hooklog_enabled** <span class='type'>Boolean</span>

    Default `logsink_enabled`

    Set whether or not to enable the log tracing.

-   **hooklog_logback_enabled** <span class='type'>Boolean</span>

    Default `hooklog_enabled`

    Set whether or not to enable the logback framework collection log tracing.

-   **hooklog_log4j_enabled** <span class='type'>Boolean</span>

    Default `hooklog_enabled`

    Set whether or not to enable the log4j framework collection log tracing.

-   **hooklog_tomcat_enabled** <span class='type'>Boolean</span>

    Default `hooklog_enabled`

    Set whether or not to enable the Tomcat log tracing.

-   **hooklog_custom_methods**

    Register a user-defined log. An arbitrary log framework content is delivered. Use this to trace logs of the log module created on the website.

    ```ini title='whatap.conf'
    hooklog_custom_methods=com.greatshop.common.Log.print
    ```

### Log transmission setting

-   **logsink_queue_size** <span class='type'>Int</span>

    Default `1000`

    It is the queue size setting upon log transmission.

-   **logsink_line_size** <span class='type'>Int</span>

    Default `512`

    Set the maximum size of a single line when sending logs.

### Compressed log transmission

-   **logsink_zip_enabled** <span class='type'>Boolean</span>

    Default `true`

    Collected log data can be compressed and transmitted.

-   **debug_logsink_zip_enabled** <span class='type'>Boolean</span>

    Default `false`

    Set whether or not to debug during compressed transmission for log data. The related information is displayed in the agent log.

-   **logsink_zip_min_size** <span class='type'>Int</span>

    Default `100`

    Set the minimum size for compressed log transmission. If the transmitted data is within 100 bytes, the data is not compressed.

-   **logsink_max_buffer_size** <span class='type'>Int</span>

    Default `65536`

    When the size of the collected log data exceeds the set value, the data is sent to the server.

-   **logsink_max_wait_time** <span class='type'>Int</span>

    Default `2000`

    Set the maximum waiting time for transmission of collected data bundled. If the set value is exceeded, the data is transmitted to the server.

-   **logsink_zip_libpath** <span class='type'>String</span>

    You can change the compression algorithm for log data. The default algorithm is GZip.

    ```ini title='whatap.conf'
    logsink_zip_libpath=/whatap/whatap-logsink-lz4-1.7.0.jar
    ```
