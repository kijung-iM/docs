## Agent structure

The following displays the WhaTap agent's structure map. 

<Xclude product='cubrid'>

![Agent structure map](/img/agent_xos_architecture.png)

</Xclude>

<InDoc product='cubrid'>

![Agent structure map](/img/agent_xos_xcub_architecture.png)

</InDoc>

-   **Collection server**

    It collects and stores the database performance data collected by agents, extracts statistical data, and efficiently provides them to users. The collection server can be set by region. Different collection server addresses are allocated to each region. The collection server address may differ depending on the selected region. When creating a project, the region is also set.

-   **DBX agent (default agent)**

    Query-based performance data is collected and transmitted to the server. Monitoring is possible without installing agents directly on the database server to be monitored.

<Xclude product='cubrid'>

-   **XOS Agent (additional agent)**

    The additional agent is an optional add-on agent that can monitor the process usage of the database server. To monitor the process usage of the database server, run a separate agent on the database server to collect data. For more information about the process monitoring configuration, see [the following](agent-manage).

</Xclude>
<InDoc product='cubrid'>

-   **XOS agent/XCUB agent (additional agent)**

    The additional agent is an optional add-on agent that can monitor the process usage of the database server. To monitor the process usage of the database server, run a separate agent on the database server to collect data. For more information about the process monitoring configuration, see [the following](agent-manage).

</InDoc>

-   **Network**

    -   Default agent: The WhaTap monitoring agent uses the external communication (TCP) port 6600 to transfer the collected monitoring data to the WhaTap collection server.

    -   Additional agent: The external communication (UDP) port 3002 is used between the server where the agent has been installed and the database server. If the internal port conflicts, the port can be changed using the `dbx_port` option.
