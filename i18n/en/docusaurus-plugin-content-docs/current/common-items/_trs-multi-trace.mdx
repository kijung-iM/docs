**Multi-transaction** means the transaction involving a different agent or project. **Multiple Transaction Trace** is to trace calls between the application services registered in the WhaTap project. 

:::note

**Enabling the multi-transaction**

To trace multi-transactions, set the activation option. 

1.  Go to **_Management_** > **_Agent CONFIG._**. 
2.  Set the value of **_activation_** option, `mtrace_enabled` to `true` under the **_Multi-server Transaction_** settings.

:::

## Multiple transaction trace

Drag the chart area in Home > Select Project > **_Analysis_** > **_Hitmap_**. The transaction information of the dragged chart area appears in the **_TX Trace_** list at the bottom. Transactions including multi-transactions in the list are marked with the ![Icon](/img/ic-s-mult-transation.svg) icon.

![mtrace_M](/img/tx-trace-table.png)

If you select the trace, the **_Statistics_** information window appears. If multi-transactions are traced, you can see the **_MTID_** value in **_Multi-transaction_** under the Summary information tab at the top. The same **_MTID_** is generated even if you issue an external call in a transaction. Even if the projects are separated by service, all transactions between applications can be checked through the initially issued **_MTID_**. For more information about the detailed analysis of TX traces through the **_Statistics_** window, see [the following](trs-profile#details).

![mtrace_apm](/img/tx-trace-dt-up.png)

If you select the ![Right arrow icon](/img/ic-arrow-right.svg) icon next to **_MTID_**, **_Analysis_** > **_Multiple Transaction Trace_** appears. **_Multiple Transaction Trace_** provides transactions and trace data so that you can see various call relationships at a glance that occur within the system or between systems and you can identify where problems have occurred for improvements. 

![Multi-transaction chart sc](/img/multi-tx-cht.png)

The ![number1](/img/number-01.png) area is the **_Filter panel_**. You can filter data by editing a specific key value (**_MTID_**/**_CUSTID_**) or project list for search. The applied filter is applied in tabs for **_Chart View_**, **_Table View_**, and **_Tree View_** displayed on the right ![number2](/img/number-02.png).

### Chart View

The main screen of **_Multiple Transaction Trace_** is **_Chart View_**. The **_Chart View_** tab quickly and clearly provides users with the call relationship between transactions. You can see individual execution times of transaction services with the same **_MTID_**. You can see the call relationship between transactions through the elapsed time (**_Time Bar_**) represented with the background color of the transaction node. 

Through the option at the top of **_Chart View_** ![number3](/img/number-03.png), you can see additional information including **_Time Bar_**. If you select **_Font Size_**, you can adjust the size of the font displayed on the chart. If you select **_Time Bar_**, **_Application Name_**, or **_Project_**, you can control the information displayed in the node. If you select **_Database_**, **_External_**, or **_Internal_**, you can see the information of other database connection requests or HTTP calls in transactions on a chart.

If you select a transaction node, the **_Statistics_** window appears as follows. The transaction trace allows you to see the transaction details. For more information about the transaction trace through the **_statistics_** window, see [the following](trs-profile#details).

![Display Detail of Multi-transaction](/img/multi-tx-stat.png)

### Table View

If you select the **_Table View_** tab, you can see the data for each transaction included in multi-transactions in a table. Select the ![Select Column Icon](/img/ic-column.svg) **_Select Column_** icon to edit the column in the table. 

![Multi-transaction Table View](/img/multi-tx-tb.png)

If you select ![Detail icon](/img/ic-pageview.svg) **_Detail_** icon, the **_Statistics_** window appears as selection of a **_chart view_** node. The transaction trace allows you to see the transaction details. For more information about the transaction trace through the **_Statistics_** window, see [the following](trs-profile#details).

### Tree View

If you select the **_Tree View_** tab, you can see the detailed information of each transaction and their traces. The transactions within the overall transaction time or start times and step times of each trace to provide transaction call relationships in a tree format. 

![Multi-transaction Tree View](/img/multi-tx-tr.png)

The ![number4](/img/number-04.png) area is a detailed information display option in a tree structure. **_View one line_** and **_View multiple lines_** are provided. **_View one line_** is the default setting. It can be collectively controlled through the top button, and individual expression methods can be switched by selecting each row.

The ![number5](/img/number-05.png) area is the elapsed time option. ![Time Bar icon](/img/ic-dashbaord-bar-chart-h.svg) **_Time Bar_**, ![Time Set icon](/img/ic-custom-time.svg) **_Time Set_**, and ![Invisible icon](/img/ic-eye-invisible.svg) **_Invisible_** are provided. In the case of start time and elapsed time, the time difference caused by the transaction call environment is corrected through traces and mappings in the parent transaction, so there may be differences from the actual collected times. The elapsed time is represented in color depending on the value as follows.

-   8 seconds or more: <span class='etrs'>Excessive delay</span> state is distinguished in <span class='etrs'>red</span>.
-   Between 3 and 8 seconds: <span class='ov5ud10'>Delay</span> state is distinguished in <span class='ov5ud10'>orange</span>.
-   Less than 3 seconds: <span class='woer'>Normal</span> state is distinguished in <span class='woer'>blue</span>.

The ![number6](/img/number-06.png) area provides dedicated options for viewing statistics or query information for each trace type. If you select ![Statistics icon](/img/ic-static.svg) icon or ![Pop-up icon](/img/ic-popup.svg) icon, you can see the summary window such as **HTTP Call Statistics\*** and **Active Stack\***.

## References

-   [Adding multi-transaction menu](https://www.whatap.io/ko/blog/85/index.html)
-   [Reorganizing multi-transaction diagram](https://www.whatap.io/ko/blog/72/index.html)
